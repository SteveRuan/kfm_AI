; The CMD file.
;
; Two parts: 1. Command definition and  2. State entry
; (state entry is after the commands def section)
;
; 1. Command definition
; ---------------------
; Note: The commands are CASE-SENSITIVE, and so are the command names.
; The eight directions are:
;   B, DB, D, DF, F, UF, U, UB     (all CAPS)
;   corresponding to back, down-back, down, downforward, etc.
; The six buttons are:
;   a, b, c, x, y, z               (all lower case)
;   In default key config, abc are are the bottom, and xyz are on the
;   top row. For 2 button characters, we recommend you use a and b.
;   For 6 button characters, use abc for kicks and xyz for punches.
;
; Each [Command] section defines a command that you can use for
; state entry, as well as in the CNS file.
; The command section should look like:
;
;   [Command]
;   name = some_name
;   command = the_command
;   time = time (optional)
;   buffer.time = time (optional)
;
; - some_name
;   A name to give that command. You'll use this name to refer to
;   that command in the state entry, as well as the CNS. It is case-
;   sensitive (QCB_a is NOT the same as Qcb_a or QCB_A).
;
; - command
;   list of buttons or directions, separated by commas. Each of these
;   buttons or directions is referred to as a "symbol".
;   Directions and buttons can be preceded by special characters:
;   slash (/) - means the key must be held down
;          egs. command = /D       ;hold the down direction
;               command = /DB, a   ;hold down-back while you press a
;   tilde (~) - to detect key releases
;          egs. command = ~a       ;release the a button
;               command = ~D, F, a ;release down, press fwd, then a
;          If you want to detect "charge moves", you can specify
;          the time the key must be held down for (in game-ticks)
;          egs. command = ~30a     ;hold a for at least 30 ticks, then release
;   dollar ($) - Direction-only: detect as 4-way
;          egs. command = $D       ;will detect if D, DB or DF is held
;               command = $B       ;will detect if B, DB or UB is held
;   plus (+) - Buttons only: simultaneous press
;          egs. command = a+b      ;press a and b at the same time
;               command = x+y+z    ;press x, y and z at the same time
;   greater-than (>) - means there must be no other keys pressed or released
;                      between the previous and the current symbol.
;          egs. command = a, >~a   ;press a and release it without having hit
;                                  ;or released any other keys in between
;   You can combine the symbols:
;     eg. command = ~30$D, a+b     ;hold D, DB or DF for 30 ticks, release,
;                                  ;then press a and b together
;
;   Note: Successive direction symbols are always expanded in a manner similar
;         to this example:
;           command = F, F
;         is expanded when MUGEN reads it, to become equivalent to:
;           command = F, >~F, >F
;
;   It is recommended that for most "motion" commads, eg. quarter-circle-fwd,
;   you start off with a "release direction". This makes the command easier
;   to do.
;
; - time (optional)
;   Time allowed to do the command, given in game-ticks. The default
;   value for this is set in the [Defaults] section below. A typical
;   value is 15.
;
; - buffer.time (optional)
;   Time that the command will be buffered for. If the command is done
;   successfully, then it will be valid for this time. The simplest
;   case is to set this to 1. That means that the command is valid
;   only in the same tick it is performed. With a higher value, such
;   as 3 or 4, you can get a "looser" feel to the command. The result
;   is that combos can become easier to do because you can perform
;   the command early. Attacks just as you regain control (eg. from
;   getting up) also become easier to do. The side effect of this is
;   that the command is continuously asserted, so it will seem as if
;   you had performed the move rapidly in succession during the valid
;   time. To understand this, try setting buffer.time to 30 and hit
;   a fast attack, such as KFM's light punch.
;   The default value for this is set in the [Defaults] section below. 
;   This parameter does not affect hold-only commands (eg. /F). It
;   will be assumed to be 1 for those commands.
;
; If you have two or more commands with the same name, all of them will
; work. You can use it to allow multiple motions for the same move.
;
; Some common commands examples are given below.
;
; [Command] ;Quarter circle forward + x
; name = "QCF_x"
; command = ~D, DF, F, x
;
; [Command] ;Half circle back + a
; name = "HCB_a"
; command = ~F, DF, D, DB, B, a
;
; [Command] ;Two quarter circles forward + y
; name = "2QCF_y"
; command = ~D, DF, F, D, DF, F, y
;
; [Command] ;Tap b rapidly
; name = "5b"
; command = b, b, b, b, b
; time = 30
;
; [Command] ;Charge back, then forward + z
; name = "charge_B_F_z"
; command = ~60$B, F, z
; time = 10
;
; [Command] ;Charge down, then up + c
; name = "charge_D_U_c"
; command = ~60$D, U, c
; time = 10


;-| Button Remapping |-----------------------------------------------------
; This section lets you remap the player's buttons (to easily change the
; button configuration). The format is:
;   old_button = new_button
; If new_button is left blank, the button cannot be pressed.
[Remap]
x = x
y = y
z = z
a = a
b = b
c = c
s = s

;-| Default Values |-------------------------------------------------------
[Defaults]
; Default value for the "time" parameter of a Command. Minimum 1.
command.time = 15

; Default value for the "buffer.time" parameter of a Command. Minimum 1,
; maximum 30.
command.buffer.time = 1


;-| Super Motions |--------------------------------------------------------
;The following two have the same name, but different motion.
;Either one will be detected by a "command = TripleKFPalm" trigger.
;Time is set to 20 (instead of default of 15) to make the move
;easier to do.
;
[Command]
name = "TripleKFPalm"
command = ~D, DF, F, D, DF, F, x
time = 20

[Command]
name = "TripleKFPalm"   ;Same name as above
command = ~D, DF, F, D, DF, F, y
time = 20

[Command]
name = "SmashKFUpper"
command = ~D, DB, B, D, DB, B, x;~F, D, DF, F, D, DF, x
time = 20

[Command]
name = "SmashKFUpper"   ;Same name as above
command = ~D, DB, B, D, DB, B, y;~F, D, DF, F, D, DF, y
time = 20

;-| Special Motions |------------------------------------------------------
[Command]
name = "upper_x"
command = ~F, D, DF, x

[Command]
name = "upper_y"
command = ~F, D, DF, y

[Command]
name = "upper_xy"
command = ~F, D, DF, x+y

[Command]
name = "QCF_x"
command = ~D, DF, F, x

[Command]
name = "QCF_y"
command = ~D, DF, F, y

[Command]
name = "QCF_xy"
command = ~D, DF, F, x+y

[Command]
name = "QCB_x"
command = ~D, DB, B, x

[Command]
name = "QCB_y"
command = ~D, DB, B, y

[Command]
name = "QCB_xy"
command = ~D, DB, B, x+y

[Command]
name = "FF_ab"
command = F, F, a+b

[Command]
name = "FF_a"
command = F, F, a

[Command]
name = "FF_b"
command = F, F, b

;-| Double Tap |-----------------------------------------------------------
[Command]
name = "FF"     ;Required (do not remove)
command = F, F
time = 10

[Command]
name = "BB"     ;Required (do not remove)
command = B, B
time = 10

;-| 2/3 Button Combination |-----------------------------------------------
[Command]
name = "recovery";Required (do not remove)
command = x+y
time = 1

;-| Dir + Button |---------------------------------------------------------
[Command]
name = "down_a"
command = /$D,a
time = 1

[Command]
name = "down_b"
command = /$D,b
time = 1

;-| Single Button |---------------------------------------------------------
[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "start"
command = s
time = 1

;-| Hold Dir |--------------------------------------------------------------
[Command]
name = "holdfwd";Required (do not remove)
command = /$F
time = 1

[Command]
name = "holdback";Required (do not remove)
command = /$B
time = 1

[Command]
name = "holdup" ;Required (do not remove)
command = /$U
time = 1

[Command]
name = "holddown";Required (do not remove)
command = /$D
time = 1

;---------------------------------------------------------------------------
[Command]
name = "AI0"
Command=a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI1"
Command=b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI2"
Command=c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI3"
Command=x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI4"
Command=y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI5"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI6"
Command=s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI7"
Command=F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI8"
Command=D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI9"
Command=B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI10"
Command=U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI11"
Command=a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI12"
Command=c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI13"
Command=x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI14"
Command=y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI15"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI16"
Command=s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI17"
Command=a,B,c,x,y,z,s,B,D,F,U,a,b,c,x,y,z,s,s
time = 0
[Command]
name = "AI18"
Command=a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI19"
Command=b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI20"
Command=c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI21"
Command=x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI22"
Command=y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI23"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI24"
Command=s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI25"
Command=F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI26"
Command=D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI27"
Command=B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI28"
Command=U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI29"
Command=a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI30"
Command=c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI31"
Command=x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI32"
Command=y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI33"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI34"
Command=s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI35"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI36"
Command=z,z,z,z,z,z,a,a,a,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI37"
Command=z,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,z,z,z
time = 0
[Command]
name = "AI38"
Command=z,z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z
time = 0
[Command]
name = "AI39"
Command=z,z,z,z,z,a,a,a,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI40"
Command=z,z,z,z,a,a,a,z,z,z,z,a,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI41"
Command=z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI42"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI43"
Command=z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,a,a,z
time = 0
[Command]
name = "AI44"
Command=z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,a,a,a,z
time = 0
[Command]
name = "AI45"
Command=z,z,z,z,z,z,a,a,z,z,z,z,z,a,a,a,a,z,z
time = 0
[Command]
name = "AI46"
Command=z,z,z,z,z,z,z,z,a,a,a,a,a,a,z,z,z,z,z
time = 0
[Command]
name = "AI47"
Command=z,z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI48"
Command=z,z,z,z,z,a,a,a,z,z,z,a,a,a,z,z,a,z,a
time = 0
[Command]
name = "AI49"
Command=z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z,z
time = 0
[Command]
name = "AI50"
Command=z,z,z,a,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z

;---------------------------------------------------------------------------
; 2. State entry
; --------------
; This is where you define what commands bring you to what states.
;
; Each state entry block looks like:
;   [State -1, Label]           ;Change Label to any name you want to use to
;                               ;identify the state with.
;   type = ChangeState          ;Don't change this
;   value = new_state_number
;   trigger1 = command = command_name
;   . . .  (any additional triggers)
;
; - new_state_number is the number of the state to change to
; - command_name is the name of the command (from the section above)
; - Useful triggers to know:
;   - statetype
;       S, C or A : current state-type of player (stand, crouch, air)
;   - ctrl
;       0 or 1 : 1 if player has control. Unless "interrupting" another
;                move, you'll want ctrl = 1
;   - stateno
;       number of state player is in - useful for "move interrupts"
;   - movecontact
;       0 or 1 : 1 if player's last attack touched the opponent
;                useful for "move interrupts"
;
; Note: The order of state entry is important.
;   State entry with a certain command must come before another state
;   entry with a command that is the subset of the first.
;   For example, command "fwd_a" must be listed before "a", and
;   "fwd_ab" should come before both of the others.
;
; For reference on triggers, see CNS documentation.
;
; Just for your information (skip if you're not interested):
; This part is an extension of the CNS. "State -1" is a special state
; that is executed once every game-tick, regardless of what other state
; you are in.


; Don't remove the following line. It's required by the CMD standard.
[Statedef -1]

;===========================================================================
;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper]
type = ChangeState
value = 3050
triggerall = var(59) = 0
triggerall = command = "SmashKFUpper"
triggerall = power >= 1000
triggerall = statetype != A
trigger1 = ctrl
trigger2 = hitdefattr = SC, NA, SA, HA
trigger2 = stateno != [3050,3100)
trigger2 = movecontact

;---------------------------------------------------------------------------
;Triple Kung Fu Palm (uses one super bar)
;OJt[iQ[WxPj
[State -1, Triple Kung Fu Palm]
type = ChangeState
value = 3000
triggerall = var(59) = 0
triggerall = command = "TripleKFPalm"
triggerall = power >= 1000
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = statetype != A
trigger2 = hitdefattr = SC, NA, SA, HA
trigger2 = stateno != [3000,3050)
trigger2 = movecontact

;===========================================================================
;This is not a move, but it sets up var(1) to be 1 if conditions are right
;for a combo into a special move (used below).
;Since a lot of special moves rely on the same conditions, this reduces
;redundant logic.
[State -1, Combo condition Reset]
type = VarSet
trigger1 = 1
var(1) = 0

[State -1, Combo condition Check]
type = VarSet
trigger1 = statetype != A
trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
trigger2 = (stateno = [200,299]) || (stateno = [400,499])
trigger2 = stateno != 440 ;Except for sweep kick
trigger2 = movecontact
var(1) = 1

;---------------------------------------------------------------------------
;Fast Kung Fu Knee (1/3 super bar)
;Jt[RiQ[WxP^Rj
[State -1, Fast Kung Fu Knee]
type = ChangeState
value = 1070
triggerall = var(59) = 0
triggerall = command = "FF_ab"
triggerall = power >= 330
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Light Kung Fu Knee
;Jt[Rij
[State -1, Light Kung Fu Knee]
type = ChangeState
value = 1050
triggerall = var(59) = 0
triggerall = command = "FF_a"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Strong Kung Fu Knee
;Jt[Rij
[State -1, Strong Kung Fu Knee]
type = ChangeState
value = 1060
triggerall = var(59) = 0
triggerall = command = "FF_b"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm]
type = ChangeState
value = 1020
triggerall = var(59) = 0
triggerall = command = "QCF_xy"
triggerall = power >= 330
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm]
type = ChangeState
value = 1000
triggerall = var(59) = 0
triggerall = command = "QCF_x"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Strong Kung Fu Palm
;Jt[ij
[State -1, Strong Kung Fu Palm]
type = ChangeState
value = 1010
triggerall = var(59) = 0
triggerall = command = "QCF_y"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Fast Kung Fu Upper (1/3 super bar)
;Jt[EEbp[
[State -1, Fast Kung Fu Upper]
type = ChangeState
value = 1120
triggerall = var(59) = 0
triggerall = command = "upper_xy"
triggerall = power >= 330
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Light Kung Fu Upper
;Jt[EEbp[ij
[State -1, Light Kung Fu Upper]
type = ChangeState
value = 1100
triggerall = var(59) = 0
triggerall = command = "upper_x"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Strong Kung Fu Upper
;Jt[EEbp[ij
[State -1, Strong Kung Fu Upper]
type = ChangeState
value = 1110
triggerall = var(59) = 0
triggerall = command = "upper_y"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Fast Kung Fu Blow (1/3 super bar)
[State -1, Fast Kung Fu Blow]
type = ChangeState
value = 1220
triggerall = var(59) = 0
triggerall = command = "QCB_xy"
triggerall = power >= 330
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Light Kung Fu Blow
[State -1, Light Kung Fu Blow]
type = ChangeState
value = 1200
triggerall = var(59) = 0
triggerall = command = "QCB_x"
trigger1 = var(1) ;Use combo condition (above)

;---------------------------------------------------------------------------
;Strong Kung Fu Blow
[State -1, Strong Kung Fu Blow]
type = ChangeState
value = 1210
triggerall = var(59) = 0
triggerall = command = "QCB_y"
trigger1 = var(1) ;Use combo condition (above)

;===========================================================================
;---------------------------------------------------------------------------
;Run Fwd
;_bV
[State -1, Run Fwd]
type = ChangeState
value = 100
triggerall = var(59) = 0
trigger1 = command = "FF"
trigger1 = statetype = S
trigger1 = ctrl

;---------------------------------------------------------------------------
;Run Back
;_bV
[State -1, Run Back]
type = ChangeState
value = 105
triggerall = var(59) = 0
trigger1 = command = "BB"
trigger1 = statetype = S
trigger1 = ctrl





;---------------------------------------------------------------------------

;测试

;---------------------------------------------------------------------------
;Triple Kung Fu Palm (uses one super bar)
;OJt[iQ[WxPj
[State -1, Triple Kung Fu Palm]
type = null;ChangeState
value = 3050
triggerall = power >= 1000
trigger1 = statetype != A
trigger1 = hitdefattr = SC, NA, SA, HA
trigger1 = stateno != [3000,3050)
trigger1 = movecontact
trigger1 = stateno = 1000

;---------------------------------------------------------------------------
;Strong Kung Fu Knee
;Jt[Rij
[State -1, Strong Kung Fu Knee]
type = null;ChangeState
value = 1060
trigger1 = var(1) 
trigger1 = movecontact;movehit
trigger1 = stateno = 200 || stateno = 210 || stateno = 400 || stateno = 410 || stateno = 230

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm]
type = null;ChangeState
value = 1020
triggerall = power >= 330
trigger1 = var(1) 
trigger1 = movecontact;movehit
trigger1 = stateno = 210 || stateno = 240 || stateno = 410 || stateno = 230 || stateno = 430

;---------------------------------------------------------------------------
;Light Kung Fu Blow
[State -1, Light Kung Fu Blow]
type = null;ChangeState
value = 1200
trigger1 = var(1) ;Use combo condition (above)
trigger1 = movecontact;movehit
trigger1 = stateno = 210 || stateno = 240 || stateno = 410 || stateno = 230 || stateno = 430

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm]
type = null;ChangeState
value = 1000
trigger1 = var(1) ;Use combo condition (above)
trigger1 = stateno = 400
trigger1 = movehit

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch]
type = null;ChangeState
value = 200
trigger1 = stateno = 200
trigger1 = time > 6
trigger1 = movehit

;---------------------------------------------------------------------------
;Stand Strong Punch
;p`
[State -1, Stand Strong Punch]
type = null;ChangeState
value = 210
triggerall = movecontact;movehit
trigger1 = (stateno = 200) && time > 5
trigger2 = (stateno = 230) && time > 6

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick]
type = null;ChangeState
value = 230
triggerall = movecontact;movehit
trigger1 = (stateno = 200) && time > 7
trigger2 = (stateno = 230) && time > 9


;---------------------------------------------------------------------------
;Standing Strong Kick
;LbN
[State -1, Standing Strong Kick]
type = null;ChangeState
value = 240
triggerall = movecontact;movehit
trigger1 = (stateno = 200) && time > 5
trigger2 = (stateno = 230) && time > 6

;---------------------------------------------------------------------------
;Crouching Strong Punch
;p`
[State -1, Crouching Strong Punch]
type = null;ChangeState
value = 410
trigger1 = (stateno = 400) || (stateno = 430)
trigger1 = (movecontact && time > 5)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick]
type = null;ChangeState
value = 430
trigger1 = (stateno = 400) || (stateno = 430)
trigger1 = (movecontact && time > 5)

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick]
type = null;ChangeState
value = 440
trigger1 = (stateno = 400) || (stateno = 430)
trigger1 = (movecontact && time > 5)

;---------------------------------------------------------------------------









;---------------------------------------------------------------------------
;Kung Fu Throw
;
[State -1, Kung Fu Throw]
type = ChangeState
value = 800
triggerall = var(59) = 0
triggerall = command = "y"
triggerall = statetype = S
triggerall = ctrl
triggerall = stateno != 100
trigger1 = command = "holdfwd"
trigger1 = p2bodydist X < 3
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = p2movetype != H
trigger2 = command = "holdback"
trigger2 = p2bodydist X < 5
trigger2 = (p2statetype = S) || (p2statetype = C)
trigger2 = p2movetype != H


;===========================================================================
;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch]
type = ChangeState
value = 200
triggerall = var(59) = 0
triggerall = command = "x"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = 200
trigger2 = time > 6

;---------------------------------------------------------------------------
;Stand Strong Punch
;p`
[State -1, Stand Strong Punch]
type = ChangeState
value = 210
triggerall = var(59) = 0
triggerall = command = "y"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = (stateno = 200) && time > 5
trigger3 = (stateno = 230) && time > 6

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59) = 0
triggerall = command = "a"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = (stateno = 200) && time > 7
trigger3 = (stateno = 230) && time > 9

;---------------------------------------------------------------------------
;Standing Strong Kick
;LbN
[State -1, Standing Strong Kick]
type = ChangeState
value = 240
triggerall = var(59) = 0
triggerall = command = "b"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = (stateno = 200) && time > 5
trigger3 = (stateno = 230) && time > 6

;---------------------------------------------------------------------------
;Taunt
;
[State -1, Taunt]
type = ChangeState
value = 195
triggerall = var(59) = 0
triggerall = command = "start"
trigger1 = statetype != A
trigger1 = ctrl

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = var(59) = 0
triggerall = command = "x"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl

;---------------------------------------------------------------------------
;Crouching Strong Punch
;p`
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59) = 0
triggerall = command = "y"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = (stateno = 400) || (stateno = 430)
trigger2 = (time > 9) || (movecontact && time > 5)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59) = 0
triggerall = command = "a"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = (stateno = 400) || (stateno = 430)
trigger2 = (time > 9) || (movecontact && time > 5)

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick]
type = ChangeState
value = 440
triggerall = var(59) = 0
triggerall = command = "b"
triggerall = command = "holddown"
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = (stateno = 400) || (stateno = 430)
trigger2 = (time > 9) || (movecontact && time > 5)

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch]
type = ChangeState
value = 600
triggerall = var(59) = 0
triggerall = command = "x"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600
trigger2 = statetime >= 7
trigger3 = stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Punch
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
triggerall = var(59) = 0
triggerall = command = "y"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 || stateno = 630 ;jump_x or jump_a
trigger2 = movecontact
trigger3 = stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Light Kick
[State -1, Jump Light Kick]
type = ChangeState
value = 630
triggerall = var(59) = 0
triggerall = command = "a"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick]
type = ChangeState
value = 640
triggerall = var(59) = 0
triggerall = command = "b"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 || stateno = 630 ;jump_x or jump_a
trigger2 = movecontact
trigger3 = stateno = 1350 ;Air blocking



;===========================================================================
;AI(CPU)
;===========================================================================


;===========================================================================
;[AI结构]
;
;
;[AI开关]
;｜
;[变量]
;｜
;[特殊优先、对策]
;｜
;[切反、抓出招硬直]
;｜
;[抢招]
;｜
;[(起攻、压制、抓受身、骗招、诈飞)]
;｜├[地上]
;｜└[空中]
;[(连招、目押、地面追击)]
;｜├[地上]
;｜└[空中]
;[立回]
;｜
;[防御]
;｜
;[移动]
;｜
;[蓄气]
;｜
;[AI helper]


;===========================================================================

;[AI开关]

;---------------------------------------------------------------------------
[State -1, AI开关]
Type = VarSet ;设置变量的值
Triggerall = Var(59) = 0   ;当Var(59)=0(ai没有被开启的时候)
Trigger1 = Command = "AI0"
Trigger2 = Command = "AI1"
Trigger3 = Command = "AI2"
Trigger4 = Command = "AI3"
Trigger5 = Command = "AI4"
Trigger6 = Command = "AI5"
Trigger7 = Command = "AI6"
Trigger8 = Command = "AI7"
Trigger9 = Command = "AI8"
Trigger10 = Command = "AI9"
Trigger11 = Command = "AI10"
Trigger12 = Command = "AI11"
Trigger13 = Command = "AI12"
Trigger14 = Command = "AI13"
Trigger15 = Command = "AI14"
Trigger16 = Command = "AI15"
Trigger17 = Command = "AI16"
Trigger18 = Command = "AI17"
Trigger19 = Command = "AI18"
Trigger20 = Command = "AI19"
Trigger21 = Command = "AI20"
Trigger22 = Command = "AI21"
Trigger23 = Command = "AI22"
Trigger24 = Command = "AI23"
Trigger25 = Command = "AI24"
Trigger26 = Command = "AI25"
Trigger27 = Command = "AI26"
Trigger28 = Command = "AI27"
Trigger29 = Command = "AI28"
Trigger30 = Command = "AI29"
Trigger31 = Command = "AI30"
Trigger32 = Command = "AI31"
Trigger33 = Command = "AI32"
Trigger34 = Command = "AI33"
Trigger35 = Command = "AI34"
Trigger36 = Command = "AI35"
Trigger37 = Command = "AI36"
Trigger38 = Command = "AI37"
Trigger39 = Command = "AI38"
Trigger40 = Command = "AI39"
Trigger41 = Command = "AI40"
Trigger42 = Command = "AI41"
Trigger43 = Command = "AI42"
Trigger44 = Command = "AI43"
Trigger45 = Command = "AI44"
Trigger46 = Command = "AI45"
Trigger47 = Command = "AI46"
Trigger48 = Command = "AI47"
Trigger49 = Command = "AI48"
Trigger50 = Command = "AI49"
Trigger51 = Command = "AI50"
Trigger52 = 1 ;无条件触发，就是所谓的ai常时启动，想手控人物就在这行前面加分号
;Trigger52 = movecontact
;Trigger52 = enemynear,movetype = h
V = 59
Value = 5 ;AI等级为1~5（1~3并级，4强级，5凶左右），详细见AI(ks) readme.txt
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State -1, 世纪末轻拳王/似非空刃开关]
Type = VarSet 
Trigger1 = Var(59) = 5
Trigger1 = Helper(97530),FVar(33) != (0,10]
V = 56
Value = 2 ;蹲轻拳连击/似非空刃次数，AI等级5专用，蹲轻拳连击次数为X，似非空刃次数为X/3，默认2，1为关闭，100就是北斗百裂拳...0为搬运至墙边停止，-1为无限连并开启世纪末排球，慎用- -
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State -1, 挑衅开关]
Type = VarSet 
Trigger1 = Var(59) > 0
V = 55
Value = 0 ;默认0，0为关闭，1为胜利后三鞠躬，2为优势时低几率挑衅+胜利后三鞠躬（慎用）
IgnoreHitPause = 1


;===========================================================================

;[变量]

;---------------------------------------------------------------------------
;变量表：
;
;Var(1) = Combo condition Check
;Var(2) = Kung Fu Throw (state 800) 方向
;......
;Var(49) = 对方出招编号对应变量
;......
;Var(54) = 双打检测
;Var(55) = 挑衅开关
;Var(56) = 世纪末轻拳王开关
;Var(57) = 对手ID记录
;Var(58) = 保留变量
;Var(59) = AI开关/等级

;---------------------------------------------------------------------------
[State -1, 保留变量]
type = VarSet
Trigger1 = Var(59) > 0
Trigger1 = Roundstate > 2
V = 58
value = Floor(Helper(97530),FVar(0) + Helper(97530),FVar(1)*10 + Helper(97530),FVar(2)*100 + Helper(97530),FVar(3)*1000)
IgnoreHitPause = 1

[State -1, 对手变更 保留变量Reset]
type = VarSet
Triggerall = Var(59) > 0
trigger1 = Var(57) != Enemynear,ID
trigger2 = Roundstate = 2
V = 58
value = 0
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State -1, 对手ID记录]
type = VarSet
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(57) != Enemynear,ID
Trigger1 = Numenemy = 1
V = 57
value = Enemynear,ID
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State -1, 双打检测]
type = VarSet
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Trigger1 = Numenemy > 0
V = 54
value = ifelse(!(EnemyNear(0),Alive), 1, 0)
IgnoreHitPause = 1

;---------------------------------------------------------------------------
[State -1, 对方出招编号对应变量 reset]
Type = VarSet
trigger1 = Var(49) != 0
V = 49
value = 0
IgnoreHitPause = 1

[State -1, 对方出招编号对应变量]
Type = Null
triggerall = Enemynear(Root,Var(54)),Movetype = A
trigger1 = Helper(97531),Var(1) = Enemynear(Root,Var(54)),Stateno
trigger1 = Var(49) := 1
trigger2 = Helper(97531),Var(2) = Enemynear(Root,Var(54)),Stateno
trigger2 = Var(49) := 2
trigger3 = Helper(97531),Var(3) = Enemynear(Root,Var(54)),Stateno
trigger3 = Var(49) := 3
trigger4 = Helper(97531),Var(4) = Enemynear(Root,Var(54)),Stateno
trigger4 = Var(49) := 4
trigger5 = Helper(97531),Var(5) = Enemynear(Root,Var(54)),Stateno
trigger5 = Var(49) := 5
trigger6 = Helper(97531),Var(6) = Enemynear(Root,Var(54)),Stateno
trigger6 = Var(49) := 6
trigger7 = Helper(97531),Var(7) = Enemynear(Root,Var(54)),Stateno
trigger7 = Var(49) := 7
trigger8 = Helper(97531),Var(8) = Enemynear(Root,Var(54)),Stateno
trigger8 = Var(49) := 8
trigger9 = Helper(97531),Var(9) = Enemynear(Root,Var(54)),Stateno
trigger9 = Var(49) := 9
trigger10 = Helper(97531),Var(10) = Enemynear(Root,Var(54)),Stateno
trigger10 = Var(49) := 10
trigger11 = Helper(97531),Var(11) = Enemynear(Root,Var(54)),Stateno
trigger11 = Var(49) := 11
trigger12 = Helper(97531),Var(12) = Enemynear(Root,Var(54)),Stateno
trigger12 = Var(49) := 12
trigger13 = Helper(97531),Var(13) = Enemynear(Root,Var(54)),Stateno
trigger13 = Var(49) := 13
trigger14 = Helper(97531),Var(14) = Enemynear(Root,Var(54)),Stateno
trigger14 = Var(49) := 14
trigger15 = Helper(97531),Var(15) = Enemynear(Root,Var(54)),Stateno
trigger15 = Var(49) := 15
trigger16 = Helper(97531),Var(16) = Enemynear(Root,Var(54)),Stateno
trigger16 = Var(49) := 16
trigger17 = Helper(97531),Var(17) = Enemynear(Root,Var(54)),Stateno
trigger17 = Var(49) := 17
trigger18 = Helper(97531),Var(18) = Enemynear(Root,Var(54)),Stateno
trigger18 = Var(49) := 18
trigger19 = Helper(97531),Var(19) = Enemynear(Root,Var(54)),Stateno
trigger19 = Var(49) := 19
trigger20 = Helper(97531),Var(20) = Enemynear(Root,Var(54)),Stateno
trigger20 = Var(49) := 20
trigger21 = Helper(97531),Var(21) = Enemynear(Root,Var(54)),Stateno
trigger21 = Var(49) := 21
trigger22 = Helper(97531),Var(22) = Enemynear(Root,Var(54)),Stateno
trigger22 = Var(49) := 22
trigger23 = Helper(97531),Var(23) = Enemynear(Root,Var(54)),Stateno
trigger23 = Var(49) := 23
trigger24 = Helper(97531),Var(24) = Enemynear(Root,Var(54)),Stateno
trigger24 = Var(49) := 24
trigger25 = Helper(97531),Var(25) = Enemynear(Root,Var(54)),Stateno
trigger25 = Var(49) := 25
trigger26 = Helper(97531),Var(26) = Enemynear(Root,Var(54)),Stateno
trigger26 = Var(49) := 26
trigger27 = Helper(97531),Var(27) = Enemynear(Root,Var(54)),Stateno
trigger27 = Var(49) := 27
trigger28 = Helper(97531),Var(28) = Enemynear(Root,Var(54)),Stateno
trigger28 = Var(49) := 28
trigger29 = Helper(97531),Var(29) = Enemynear(Root,Var(54)),Stateno
trigger29 = Var(49) := 29
trigger30 = Helper(97531),Var(30) = Enemynear(Root,Var(54)),Stateno
trigger30 = Var(49) := 30
trigger31 = Helper(97531),Var(31) = Enemynear(Root,Var(54)),Stateno
trigger31 = Var(49) := 31
trigger32 = Helper(97531),Var(32) = Enemynear(Root,Var(54)),Stateno
trigger32 = Var(49) := 32
trigger33 = Helper(97531),Var(33) = Enemynear(Root,Var(54)),Stateno
trigger33 = Var(49) := 33
trigger34 = Helper(97531),Var(34) = Enemynear(Root,Var(54)),Stateno
trigger34 = Var(49) := 34
trigger35 = Helper(97531),Var(35) = Enemynear(Root,Var(54)),Stateno
trigger35 = Var(49) := 35
trigger36 = Helper(97531),Var(36) = Enemynear(Root,Var(54)),Stateno
trigger36 = Var(49) := 36
trigger37 = Helper(97531),Var(37) = Enemynear(Root,Var(54)),Stateno
trigger37 = Var(49) := 37
trigger38 = Helper(97531),Var(38) = Enemynear(Root,Var(54)),Stateno
trigger38 = Var(49) := 38
trigger39 = Helper(97531),Var(39) = Enemynear(Root,Var(54)),Stateno
trigger39 = Var(49) := 39
IgnoreHitPause= 1

;---------------------------------------------------------------------------
;[State -1, 对方目前Stateno记录]
;type = VarSet
;trigger1 = 1
;V = 3
;Value = ifelse((Enemynear,hitdefattr = SCA,AA,AP,AT), 1, 0)

;[State -1, 对方目前Stateno记录]
;type = VarSet
;trigger1 = Enemynear,Stateno < 200
;V = 3
;Value = 0

;---------------------------------------------------------------------------
;[State -1, 对方目前Stateno记录]
;type = VarSet
;trigger1 = movetype != H && Stateno < 5000
;V = 3
;Value = Stateno

;---------------------------------------------------------------------------
;[State -1,]
;type = Varset
;trigger1 = time = 10
;trigger1 = stateno = 640
;V = 4
;Value = p2dist y
;IgnoreHitPause = 1

;[State -1,]
;type = Varset
;trigger1 = time = 10
;trigger1 = stateno = 640
;V = 5
;Value = p2bodydist y
;IgnoreHitPause = 1

;---------------------------------------------------------------------------

;[State -1, 招式时间Reset]
;Type = VarSet
;Trigger1 = statetype = A
;V = 4
;Value = time

;[State -1, 招式时间Reset]
;Type = VarSet
;Trigger1 = statetype = C
;V = 4
;Value = 0

;[State -1, 招式时间]
;Type = VarAdd
;Trigger1 = movetype = A && !movehit
;V = 3
;Value = 1


;===========================================================================

;[特殊优先、对策]

;---------------------------------------------------------------------------
[State -1, SMH对策第一局开场强制下蹲]
type = ChangeState
value = 400
Triggerall = Helper(97530),FVar(33) = 1
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = PrevStateno = 191

;---------------------------------------------------------------------------
[State -1, SMH对策强制排除蹲防www]
type = ChangeState
value = 131
Triggerall = Helper(97530),FVar(33) = 1
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = EnemyNear(Var(54)),Stateno=[2000,2009]

;---------------------------------------------------------------------------
[State -1, SMH对策挑衅]
type = ChangeState
value = 195
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = Helper(97530),FVar(33) = 2
Trigger1 = Helper(97530),FVar(32) > 600
Trigger1 = P2bodydist X < 20
Trigger2 = Helper(97530),FVar(33) = 4
Trigger2 = EnemyNear(Var(54)),Statetype = A

;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper SMH对策超升龙一片无悔155+70.8]
type = ChangeState
value = 3050
Triggerall = Helper(97530),FVar(33) = 2
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 3
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = P2bodydist X < 110 && facing = EnemyNear(Var(54)),facing

;---------------------------------------------------------------------------
[State -1, SMH对策第三局开始后跳]
type = ChangeState
value = 39
Triggerall = Helper(97530),FVar(33) = 3
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = (ctrl || (Stateno = [19,21]))

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch SMH对策第三局跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = Helper(97530),FVar(33) = 4
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = (ctrl || (Stateno = 600 && statetime >= 7))
Trigger1 = RoundNo = 3

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 黑鬼对策跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = ctrl
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-25,60]) || (Pos Y + Vel Y * 10 + Const(movement.yaccel) * 10 * (10+1) / 2 >= 0)
Trigger1 = EnemyNear(Var(54)),Statetype = S
Trigger1 = !(Backedgebodydist < 10)
Trigger2 = Stateno = 630 && Movehit
Trigger2 = Helper(97530),FVar(34) = 9 || (Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0)

;---------------------------------------------------------------------------
;Fast Kung Fu Upper (1/3 super bar)
;Jt[EEbp[
[State -1, Fast Kung Fu Upper 黑鬼对策快升龙98.(4,9)]
type = ChangeState
value = 1120
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = power >= 330
Triggerall = Var(1)
Trigger1 = P2bodydist X < 5 && P2dist X >= 0 && Helper(97530),FVar(34) >= 5
Trigger1 = (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C) && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5000
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 黑鬼对策轻掌90.85.9]
type = ChangeState
value = 1000
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Trigger1 = (Stateno = 200 || Stateno = 400) && P2bodydist X < 80
Trigger1 = (EnemyNear(Var(54)),Statetype != A && power < 330) || (EnemyNear(Var(54)),Pos Y > -60 && EnemyNear(Var(54)),Statetype = A && facing != EnemyNear(Var(54)),facing && Roundno = 1)
Trigger1 = Movehit && P2dist X >= -5 && EnemyNear(Var(54)),Movetype = H

;Trigger2 = ((P2bodydist X - EnemyNear(Var(54)),Vel X*9*ifelse((facing != EnemyNear(Var(54)),facing),1,-1) = [-20,80]) || P2bodydist X < 60) && EnemyNear(Var(54)),Movetype = H
;Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 9 + EnemyNear(Var(54)),gethitvar(yaccel) * 9 * (9 + 1) / 2 = [-35,0)) && EnemyNear(Var(54)),Statetype = A)
;Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;---------------------------------------------------------------------------
[State -1, 跳跃回避投技]
type = ChangeState
value = ifelse(P2bodydist X > 50, 41, 42)
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = facing != EnemyNear(Var(54)),facing
Triggerall = (Random < Var(59)*200) || (Var(59) > 3)
Triggerall = EnemyNear(Var(54)),Movetype = A && (EnemyNear(Var(54)),Statetype != A || Random < 500) && EnemyNear(Var(54)),Vel X = 0
Triggerall = (P2bodydist X = [0,120]) && EnemyNear(Var(54)),Numproj = 0
Triggerall = (Helper(97530),FVar(32) <= 150*Var(59) && EnemyNear(Var(54)),AnimTime <= -30) || (Helper(97530),FVar(32) < 50)
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [120,140)))
Triggerall = Floor(Helper(97530),FVar(38)/1000) <= 5
Triggerall = !(EnemyNear(Var(54)),Name="cvsg_rugal" && EnemyNear(Var(54)),Stateno=1700)
Trigger1 = (Var(49) = [31,34]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 5

;---------------------------------------------------------------------------
[State -1, 对投无敌时反击]
type = ChangeState
value = ifelse(P2bodydist X < 36, 400, 230)
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = facing != EnemyNear(Var(54)),facing
Triggerall = (Random < Var(59)*200) || (Var(59) > 3)
Triggerall = EnemyNear(Var(54)),Movetype = A && (EnemyNear(Var(54)),Statetype != A || Random < 500) && EnemyNear(Var(54)),Vel X = 0
Triggerall = P2bodydist X < 50 && P2dist X >= 0 && EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(32) <= 150*Var(59)
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Triggerall = Floor(Helper(97530),FVar(38)/1000) > 5
Triggerall = !(EnemyNear(Var(54)),Name="cvsg_rugal" && EnemyNear(Var(54)),Stateno=1700)
Trigger1 = (Var(49) = [31,34]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time = [-5,5])

;---------------------------------------------------------------------------
[State -1, 后撤]
type = ChangeState
value = 105
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (Random < Var(59)*200) || (Var(59) > 3)
Triggerall = Floor(Helper(97530),FVar(38)/1000) < 5
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Stateno >= 200 && facing != EnemyNear(Var(54)),facing
Trigger1 = (Var(49) = [31,34]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time = [-5,5])
Trigger2 = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Stateno >= 200 && facing != EnemyNear(Var(54)),facing
Trigger2 = ((Ceil(Helper(97530),FVar(39)) & 2**0) || EnemyNear(Var(54)),Stateno = Helper(97531),Var(35)) && Var(59) > 2
Trigger3 = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Stateno >= 200 && facing != EnemyNear(Var(54)),facing
Trigger3 = EnemyNear(Var(54)),hitdefattr = SC,AT ;对手出投技时后撤
Trigger3 = inguarddist || (P2bodydist X = [-20,100])
Trigger4 = Helper(97530),FVar(0) = 9 && (EnemyNear(Var(54)),Stateno = [5110,5130)) && P2bodydist X < 50

;Trigger4 = (P2bodydist X < 100) && (EnemyNear(Var(54)),Stateno = [200,700)) && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Time <= 1
;Trigger4 = Backedgebodydist > 60 && Random < 200 && Power < 300 
;Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))

;Trigger4 = (P2bodydist X = (0,50]) && (EnemyNear(Var(54)),Stateno = [5070,5120)) && (EnemyNear(Var(54)),Vel Y > 0) && (EnemyNear(Var(54)),Pos Y > -10)
;Trigger4 = Backedgebodydist > 120 && Power < 2500
;Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger3 = (Stateno = 410 || Stateno = 440) && AnimTime = 0 && (EnemyNear(Var(54)),Movetype != A)
;Trigger3 = Backedgebodydist > 120 && (EnemyNear(Var(54)),Power > 1000 || P2bodydist X > 45)

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 对空投跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Triggerall = Pos Y + Vel Y * 4 + Const(movement.yaccel) * 4 * (4+1) / 2 < 0
Triggerall = (Random < Var(59)*180)
Triggerall = ctrl || (Stateno = 600 && time >= 7)
Trigger1 = ((P2dist Y - Vel Y * 4 - const(movement.yaccel) * 4 * (4 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 = [-30,30]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = ((Var(49) = [31,34]) || EnemyNear(Var(54)),hitdefattr = A,AT) && EnemyNear(Var(54)),Movetype = A

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
[State -1, 原地跳跃/跳跃前 避下段]
type = ChangeState
value = ifelse((P2bodydist X = [0,55]), 42, 41)
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Triggerall = EnemyNear(Var(54)),Statetype = C && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Time <= 2
Triggerall = ((EnemyNear(Var(54)),AnimTime <= -40 && Helper(97530),FVar(32) < 800) || (EnemyNear(Var(54)),AnimTime <= -35 && Helper(97530),FVar(32) < 200))
Triggerall = (P2bodydist X = [0,120])
Triggerall = EnemyNear(Var(54)),Stateno != Helper(97530),Var(46) && EnemyNear(Var(54)),Stateno != Helper(97530),Var(47) && EnemyNear(Var(54)),Stateno != Helper(97530),Var(48) && EnemyNear(Var(54)),Stateno != Helper(97530),Var(49)
Trigger1 = (Var(49) = [1,25]) && Helper(97531),FVar(Var(49)) >= 6
Trigger2 = (EnemyNear(Var(54)),Stateno = [430,450)) && Random < 50

;---------------------------------------------------------------------------
[State -1, 似非空刃起跳]
type = ChangeState
value = ifelse((((facing != EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Backedgebodydist < 3) || (facing = EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Frontedgebodydist < 3)) && P2bodydist X < 10),42,41)
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype = S && Helper(97530),FVar(33) = 12 && EnemyNear(Var(54)),Movetype = H && Helper(97530),FVar(34) >= 10
Triggerall = P2bodydist X < 30 && P2dist X >= 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = Var(56) > 0 && Var(56) > Ceil(Helper(97530),FVar(11)/10)
Trigger2 = Var(56) = 0 && ((facing != EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Backedgebodydist > 3) || (facing = EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Frontedgebodydist > 3))
Trigger3 = Var(56) < 0

;---------------------------------------------------------------------------
[State -1, 世纪末追击前跑]
type = ChangeState
value = 101
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (Stateno = 0 || (Stateno = [19,21])) && Helper(97530),FVar(34) >= 5 && EnemyNear(Var(54)),Movetype = H
Triggerall = EnemyNear(Var(54)),Statetype !=L; S || EnemyNear(Var(54)),Statetype = C
Triggerall = Helper(97530),FVar(11) > -6 
Trigger1 = Var(56) > 0 && Var(56) > Ceil(Helper(97530),FVar(11)/10)
Trigger2 = Var(56) = 0 && ((facing != EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Backedgebodydist > 3) || (facing = EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Frontedgebodydist > 3))
Trigger3 = Var(56) < 0

;---------------------------------------------------------------------------
[State -1, 世纪末追击向前走]
type = ChangeState
value = 21
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Stateno = 400 && Movehit && time > 5+4*(EnemyNear(Var(54)),Statetype=A) && EnemyNear(Var(54)),Movetype = H
Triggerall = EnemyNear(Var(54)),Statetype !=L; S || EnemyNear(Var(54)),Statetype = C
Triggerall = Helper(97530),FVar(11) > -6 
Trigger1 = Var(56) > 0 && Var(56) > Ceil(Helper(97530),FVar(11)/10)
Trigger2 = Var(56) = 0 && ((facing != EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Backedgebodydist > 3) || (facing = EnemyNear(Var(54)),facing && EnemyNear(Var(54)),Frontedgebodydist > 3))
Trigger3 = Var(56) < 0

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 世纪末蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (Var(56) > 0 && Var(56) > Ceil(Helper(97530),FVar(11)/10)) || Var(56) <= 0
Triggerall = Helper(97530),FVar(11) > -8 
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (P2bodydist X < 10 && P2dist X >= 0 && Helper(97530),FVar(34) >= 5) || (P2bodydist X < 33 - (EnemyNear(Var(54)),Stateno = [120,160)) && P2dist X >= 0 && (Helper(97530),FVar(34) = [2*(1+(P2bodydist X>20)),5]))
Trigger1 = EnemyNear(Var(54)),Movetype = H && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C)
Trigger2 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,36]) || P2bodydist X < 32) && P2dist X >= 0 && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H
Trigger2 = EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 > -9-21*(Helper(97530),FVar(33)=5)
Trigger2 = Helper(97530),FVar(37) = 15 && Helper(97530),FVar(10) = 12

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 似非空刃跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0) && Vel Y > 0
Triggerall = Stateno = 600 && Movehit = 1
Triggerall = P2bodydist X-Vel X*7 < 52 && P2dist X >= 0
Trigger1 = (Pos Y + Vel Y * 15 + const(movement.yaccel) * 15 * (15 + 1) / 2 >= 0)
Trigger1 = EnemyNear(Var(54)),Statetype = S && Helper(97530),FVar(33) = 12 && EnemyNear(Var(54)),Movetype = H

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 似非空刃跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = Pos Y + Vel Y * 4 + Const(movement.yaccel) * 4 * (4+1) / 2 < 0
Trigger1 = P2bodydist X-Vel X*4 < 35 && P2dist X >= 0
Trigger1 = EnemyNear(Var(54)),Statetype = S && Helper(97530),FVar(33) = 12 && EnemyNear(Var(54)),Movetype = H
Trigger1 = ctrl || (Stateno = 600 && time >= 7 && Helper(97530),FVar(34) = 5)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 双打蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 9
Triggerall = ((EnemyNear(Var(54)),Time >= 20-Var(59)*5) && Var(59) < 4) || Var(59) > 3
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = P2bodydist X < 36 && P2dist X >= 0 && facing = EnemyNear(0),facing && EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Movetype = A
Trigger1 = Backedgebodydist < EnemyNear(0),Backedgebodydist
Trigger1 = (Numenemy > 1 && EnemyNear(0),Life > 0 && EnemyNear(1),Life > 0)
Trigger2 = P2bodydist X < 36 && P2dist X >= 0 && EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Movetype = H && Partner,Movehit 
Trigger2 = Numenemy > 1

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 双打轻掌90.70.9]
type = ChangeState
value = 1000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (((Stateno = [200,299]) || (Stateno = [400,499])) && Stateno != 440 && Movecontact))
Trigger1 = P2bodydist X < 65 && P2dist X >= 0 && facing = EnemyNear(0),facing && EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Movetype = A
Trigger1 = Backedgebodydist < EnemyNear(0),Backedgebodydist
Trigger1 = (Numenemy > 1 && EnemyNear(0),Life > 0 && EnemyNear(1),Life > 0)
Trigger2 = P2bodydist X < 65 && P2dist X >= 0 && EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Movetype = H && Partner,Movehit 
Trigger2 = Numenemy > 1

;---------------------------------------------------------------------------
[State -1, 蹲可控]
type = Ctrlset
Triggerall = !Ishelper
Triggerall = Var(59) != 0
Triggerall = Statetype != A 
Trigger1 = Stateno = 11 
value = 1

;---------------------------------------------------------------------------
[State -1, 高空受身]
Type = ChangeState
Value = 5210
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Vel Y > -1
Triggerall = Pos Y < -20 && Pos Y > -80
Triggerall = Alive && CanRecover
Triggerall = Stateno = 5050 && Helper(97530),FVar(32) <= 800   ;&& (P2Bodydist X = [-10,50]) && Backedgebodydist > 30 
Triggerall = EnemyNear(Var(54)), Stateno >= 160 && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
Trigger1 = EnemyNear(Var(54)),Movetype = H || EnemyNear(Var(54)),Statetype = L
Trigger2 = (Var(49) = [1,25]) && Inguarddist
Trigger2 = (EnemyNear(Var(54)),Time = (Helper(97531),FVar(Var(49))-3,Helper(97531),FVar(Var(49))]) && EnemyNear(Var(54)),AnimTime <= -(Helper(97530),FVar(32)/40+5)
Trigger3 = Helper(97530),FVar(33) = 5

;---------------------------------------------------------------------------
;[State -1, 低空受身]
;type = ChangeState
;value = 5200
;Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
;Triggerall = Var(59) > 0
;Triggerall = Vel Y > 0
;Triggerall = Pos Y >= -20
;Triggerall = Alive && CanRecover
;Triggerall = Stateno = 5050 && P2dist X > 0 && Helper(97530),FVar(32) < 800 ;&& Backedgebodydist > 30 
;Triggerall = EnemyNear(Var(54)), Stateno >= 160 && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
;Trigger1 = (&& EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),hitdefattr = sca,aa,ap,at && EnemyNear(Var(54)),AnimTime <= -(Helper(97530),FVar(32)/40+5)) || EnemyNear(Var(54)),Movetype = H || EnemyNear(Var(54)),Statetype = L
;Trigger2 = (Var(49) = [1,25]) && Inguarddist
;Trigger2 = (EnemyNear(Var(54)),Time = (Helper(97531),FVar(Var(49))-3,Helper(97531),FVar(Var(49))]) && EnemyNear(Var(54)),AnimTime <= -(Helper(97530),FVar(32)/40+5)

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 黑鬼对策蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140]))
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,36]) || P2bodydist X < 35) && P2dist X >= 0
Trigger1 = EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -30 && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype != H
;Trigger2 = EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 > -30 && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 黑鬼对策站轻拳23.44.4]
type = null;ChangeState
value = 200
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,40]) || P2bodydist X < 42) && P2dist X >= 0 && EnemyNear(Var(54)),Movetype != H && Helper(97530),FVar(10) != 4
Trigger1 = EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -35 && EnemyNear(Var(54)),Statetype = A
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140]))

;---------------------------------------------------------------------------
[State -1, 黑鬼对策前跑]
type = ChangeState
value = 101
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21])) && (Stateno != [100,101])
Trigger1 = P2bodydist X > 20 && EnemyNear(Var(54)),Statetype = A

;---------------------------------------------------------------------------
[State -1, 黑鬼对策跳]
type = ChangeState
value = 39
Triggerall = Helper(97530),FVar(33) = 5
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = P2bodydist X > 30 && EnemyNear(Var(54)),Statetype = S
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;---------------------------------------------------------------------------
[State -1, SMH、黑鬼对策无限连开启]
Type = VarSet 
Trigger1 = Var(59) = 5
Trigger1 = Helper(97530),FVar(33) = (0,10]
V = 56
Value = -1 
IgnoreHitPause = 1

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch SMH对策蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = Helper(97530),FVar(33) = 1
Trigger1 = EnemyNear(Var(54)),PrevStateno = [2000,2009]
Trigger2 = Helper(97530),FVar(33) = (0,4]
Trigger2 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [-5,32]) && P2dist X >= 0) || (P2bodydist X < 36 && P2dist X >= 0)
Trigger2 = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C

;---------------------------------------------------------------------------
[State -1, SMH对策前跑]
type = ChangeState
value = 101
Triggerall = Helper(97530),FVar(33) = (0,4]
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = Stateno = 400 && time >= 5 && !Movehit
Trigger1 = EnemyNear(Var(54)),Statetype = S
Trigger1 = EnemyNear(Var(54)),Stateno != [2000,2009]
Trigger2 = Helper(97530),FVar(33) = 2
Trigger2 = P2bodydist X > 30
Trigger2 = (ctrl || (Stateno = [19,21]))

;---------------------------------------------------------------------------
[State -1, 挑衅]
type = ChangeState
value = 195
Triggerall = !Ishelper
Triggerall = Var(59) > 0
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = Roundstate = 2 && Var(59) < 3
Trigger1 = Random < 25-Var(59)*10
Trigger2 = Var(55) > 1
Trigger2 = Helper(97530),FVar(10) = 1 || (((PrevStateno = [3000,3050)) || PrevStateno = 1000) && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5000 && P2bodydist X > 100)
Trigger2 = Helper(97530),FVar(28) = 0 && Life - EnemyNear(Var(54)),life > 300 && Helper(97530),FVar(32) < 200
Trigger2 = Life - EnemyNear(Var(54)),life > 600 || EnemyNear(Var(54)),life < 50 || Power > 1800
Trigger3 = Var(55) > 0
Trigger3 = Alive && Win && Helper(97530),FVar(28) < 2


;===========================================================================

;[切反、抓出招硬直]

;---------------------------------------------------------------------------
;Triple Kung Fu Palm (uses one super bar)
;OJt[iQ[WxPj
[State -1, Triple Kung Fu Palm 超三连掌72+72+75.14]
type = ChangeState
value = 3000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 3
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3 + 2**6))
Triggerall = EnemyNear(Var(54)),AnimTime <= -14 && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Statetype != A && EnemyNear(Var(54)),Numproj = 0
Triggerall = (P2bodydist X < 100) && P2dist X >= 0 && Helper(97530),FVar(32) < 1350 - Life
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || (hitdefattr = SC, NA, SA, HA && (Stateno != [3000,3050)) && Movecontact))
Trigger1 = (Var(49) = [1,25]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time = [4,12])

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Statetype != A
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3000,3050)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper 超升龙155+70.8]
type = ChangeState
value = 3050
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 3
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3 + 2**6))
Triggerall = (EnemyNear(Var(54)),Statetype = A && (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 8 + EnemyNear(Var(54)),const(movement.yaccel) * 8 * (8 + 1) / 2 = [-100,0)))
Triggerall = (EnemyNear(Var(54)),AnimTime != [-8,0]) && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || (hitdefattr = SC, NA, SA, HA && (Stateno != [3050,3100)) && Movecontact))
Triggerall = (Var(49) = [1,25]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 2)
Trigger1 = (P2bodydist X - EnemyNear(Var(54)),Vel X*8*ifelse((facing != EnemyNear(Var(54)),facing),1,-1) = [-3,63])
Trigger2 = (Facing = 1 && Abs(helper(97533),RootDist X) <= 85 && Abs(helper(97533),P2dist X) - EnemyNear(Var(54)),Vel X*8 <= 30) || (Facing = -1 && Abs(helper(97532),RootDist X) <= 85 && Abs(helper(97532),P2dist X) - EnemyNear(Var(54)),Vel X*8 <= 30)
Trigger3 = (Facing = 1 && Abs(helper(97532),RootDist X) <= 30 && Abs(helper(97532),P2dist X) - EnemyNear(Var(54)),Vel X*8 <= 85) || (Facing = -1 && Abs(helper(97533),RootDist X) <= 30 && Abs(helper(97533),P2dist X) - EnemyNear(Var(54)),Vel X*8 <= 85)
Trigger3 = EnemyNear(Var(54)),Vel X >= 0

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Statetype != A
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3050,3100)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper 超升龙155+70.8]
type = ChangeState
value = 3050
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 3
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3 + 2**6))
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40))
Triggerall = EnemyNear(Var(54)),AnimTime <= -8 && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Statetype != A && EnemyNear(Var(54)),Numproj = 0
Triggerall = (P2dist X - EnemyNear(Var(54)),Vel X*8 = [-5,60]) || (P2bodydist X - EnemyNear(Var(54)),Vel X*8 = [-20,40])
Triggerall = (P2bodydist X < 100) && P2dist X >= 0 && Helper(97530),FVar(32) < 1500 - Life
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || (hitdefattr = SC, NA, SA, HA && (Stateno != [3050,3100)) && Movecontact))
Trigger1 = (Var(49) = [1,25]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 2)

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Statetype != A
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3050,3100)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,32]) && P2dist X >= 0) || (P2bodydist X < 35 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 36 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime <= -4
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = (Random < Var(59)*180)
Trigger2 = (P2bodydist X < 35 && P2dist X >= 0) && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Time <= 1
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -28) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger2 = (EnemyNear(Var(54)),Stateno != [200,700)) 
Trigger2 = !EnemyNear(Var(54)),hitdefattr = SCA,AA,AP,AT
Trigger2 = Helper(97530),FVar(32) < 75 - Var(59)*15

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Kung Fu Throw
;
[State -1, Kung Fu Throw 投78.1]
type = ChangeState
value = 800
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = Stateno != [100,101]
Triggerall = Floor(Helper(97530),FVar(38)) % 1000 = 0
Triggerall = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = P2bodydist X < 5 && P2dist X >= 0
Triggerall = EnemyNear(Var(54)),Pos Y = [-5,5]
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**7))
Triggerall = Var(59) > 2
Trigger1 = (EnemyNear(Var(54)),AnimTime <= -1 && (EnemyNear(Var(54)),AnimTime >= -3 || (EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && Random < Var(59)*3)))
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Statetype != A
Trigger1 = (Helper(97530),FVar(32) < Var(59)*100)

;Trigger1 = P2bodydist X < 3
;Trigger1 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger1 = EnemyNear(Var(54)),Movetype != H
;Trigger2 = P2bodydist X < 5
;Trigger2 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger2 = EnemyNear(Var(54)),Movetype != H

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 200 && Time > 6))
Triggerall = (Helper(97530),FVar(33) != (0,4])
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,35]) && P2dist X >= 0) || (P2bodydist X < 40 && P2dist X >= 0))
Trigger1 = !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 45 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -40) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime <= -4
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = (Random < Var(59)*180)
Trigger2 = (P2bodydist X < 40 && P2dist X >= 0) && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Time <= 1
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -48) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger2 = (EnemyNear(Var(54)),Stateno != [200,700))
Trigger2 = !EnemyNear(Var(54)),hitdefattr = SCA,AA,AP,AT
Trigger2 = Helper(97530),FVar(32) < 75 - Var(59)*15

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 430 && ((Time > 9) || (Movecontact && Time > 5))))
Triggerall = (Helper(97530),FVar(33) != (0,4])
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,40]) && P2dist X >= 0) || (P2bodydist X < 42 && P2dist X >= 0))
Trigger1 = !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 45 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 >= 0) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime <= -5
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = (Random < Var(59)*100)
Trigger2 = (P2bodydist X < 42 && P2dist X >= 0) && EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Time <= 1
Trigger2 = EnemyNear(Var(54)),Statetype != A
Trigger2 = (EnemyNear(Var(54)),Stateno != [200,700))
Trigger2 = Helper(97530),FVar(32) < 75 - Var(59)*15

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))
Triggerall = (Helper(97530),FVar(33) != (0,4])
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,42]) && P2dist X >= 0) || (P2bodydist X < 48 && P2dist X >= 0))
Trigger1 = !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 50 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime <= -5
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = (Random < Var(59)*100)

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0) && Vel Y > 0
Triggerall = Var(59) > 2
Triggerall = ctrl
Triggerall = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,52]) || (P2bodydist X < 54 && P2dist X >= 0)
Triggerall = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && ((EnemyNear(Var(54)),AnimTime = [-9,-7]) || (Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0))
Triggerall = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Triggerall = (Random < Var(59)*100)
Trigger1 = ((Pos Y + Vel Y * 7 + const(movement.yaccel) * 7 * (7 + 1) / 2 = [-65,-5]) && EnemyNear(Var(54)),Statetype = S)
Trigger2 = ((Pos Y + Vel Y * 7 + const(movement.yaccel) * 7 * (7 + 1) / 2 = [-40,-5]) && EnemyNear(Var(54)),Statetype = C)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick 蹲重脚72.60.10]
type = ChangeState
value = 440
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Stateno != [100,101]
Triggerall = Var(59) > 2
Trigger1 = P2bodydist X < 57 && P2dist X >= 0 && Frontedgebodydist > 75
Trigger1 = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime <= -10
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = ((Var(59) = [1,3]) && Random > 750+Var(59)*50) || (Var(59) > 3 && Helper(97530),FVar(32) > 975)
Trigger1 = ctrl || (Stateno = [19,21])

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 轻掌90.70.9]
type = ChangeState
value = 1000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*(0.75-Helper(97530),FVar(32)/10000) && EnemyNear(Var(54)),AnimTime <= -9
Trigger1 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger1 = !EnemyNear(Var(54)),hitdefattr = SCA,AA,AP,AT
Trigger1 = ((P2bodydist X < 68) && (P2dist X >= 0)) && EnemyNear(Var(54)),Statetype != A 
Trigger1 = EnemyNear(Var(54)),Numproj = 0 || EnemyNear(Var(54)),P2dist X < 0
Trigger1 = (Random < Var(59)*40)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (((Stateno = [200,299]) || (Stateno = [400,499])) && Stateno != 440 && Movecontact))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm 快掌95.150.11]
type = ChangeState
value = 1020
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220)) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 2
Trigger1 = EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*(0.75-Helper(97530),FVar(32)/10000) && EnemyNear(Var(54)),AnimTime <= -11 && EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl)
Trigger1 = !EnemyNear(Var(54)),hitdefattr = SCA,AA,AP,AT
Trigger1 = ((P2bodydist X < 100 && EnemyNear(Var(54)),AnimTime <= -11) || (P2bodydist X < 150 && EnemyNear(Var(54)),AnimTime <= -18)) && (P2dist X >= 0) && (EnemyNear(Var(54)),Vel X = [-0.5,2])
Trigger1 = (EnemyNear(Var(54)),Numproj = 0)
Trigger1 = (Random < (Power*Var(59)/25))
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (((Stateno = [200,299]) || (Stateno = [400,499])) && Stateno != 440 && Movecontact))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,32]) && P2dist X >= 0) || (P2bodydist X < 36 && P2dist X >= 0)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -28) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger1 = ((EnemyNear(Var(54)),AnimTime = [-4,-2]) && (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)))
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Random < Var(59)*180)
Trigger1 = ctrl || (Stateno = [19,21]) || (Stateno = [100,101])

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,35]) && P2dist X >= 0) || (P2bodydist X < 39 && P2dist X >= 0)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -40) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger1 = ((EnemyNear(Var(54)),AnimTime = [-4,-3]) && (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)))
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Random < Var(59)*180)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 200 && Time > 6))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,38]) && P2dist X >= 0) || (P2bodydist X < 45 && P2dist X >= 0)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -5) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger1 = ((EnemyNear(Var(54)),AnimTime = [-5,-4]) && (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)))
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Random < Var(59)*100)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 430 && Time > 9))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,42]) && P2dist X >= 0) || (P2bodydist X < 48 && P2dist X >= 0)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = ((EnemyNear(Var(54)),AnimTime = [-5,-4]) && (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)))
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Random < Var(59)*100)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**2)
Triggerall = Var(59) > 3
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0)
Triggerall = (EnemyNear(Var(54)),AnimTime = [-7,-6]) || (Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0)
Triggerall = EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)
Triggerall = (Random < Var(59)*180)
Triggerall = ctrl
Triggerall = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,50])
Trigger1 = ((Pos Y + Vel Y * 7 + const(movement.yaccel) * 7 * (7 + 1) / 2 = [-60,-5]) && EnemyNear(Var(54)),Statetype = S)
Trigger2 = ((Pos Y + Vel Y * 7 + const(movement.yaccel) * 7 * (7 + 1) / 2 = [-40,-5]) && EnemyNear(Var(54)),Statetype = C)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = P2bodydist X < (35+(Ceil(Helper(97530),FVar(32))%5)) && P2dist X >= 0 && EnemyNear(Var(54)),Vel X = 0 && EnemyNear(Var(54)),AnimTime < -5
Triggerall = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(32) > 800 || (Helper(97530),FVar(32) > 500 && (EnemyNear(Var(54)),Stateno = [200,600)))
Triggerall = Helper(97530),FVar(33) = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,25]) && EnemyNear(Var(54)),Time > Helper(97531),FVar(Var(49)) && P2bodydist X >= (Helper(97534),Var(Var(49))%1000)

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3))
Triggerall = P2bodydist X < (48+(Ceil(Helper(97530),FVar(32))%7)) && P2dist X >= 0 && EnemyNear(Var(54)),Vel X = 0 && EnemyNear(Var(54)),AnimTime < -5
Triggerall = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(32) > 800 || (Helper(97530),FVar(32) > 500 && (EnemyNear(Var(54)),Stateno = [200,600)))
Triggerall = Helper(97530),FVar(33) = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))
Trigger1 = (Var(49) = [1,25]) && EnemyNear(Var(54)),Time > Helper(97531),FVar(Var(49)) && P2bodydist X >= (Helper(97534),Var(Var(49))%1000)

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 轻掌90.70.9]
type = ChangeState
value = 1000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**3))
Triggerall = P2bodydist X < (66+(Ceil(Helper(97530),FVar(32))%6)) && P2dist X >= 0 && EnemyNear(Var(54)),Vel X = 0 && EnemyNear(Var(54)),AnimTime < -9
Triggerall = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(32) > 800 || (Helper(97530),FVar(32) > 500 && (EnemyNear(Var(54)),Stateno = [200,600)))
Triggerall = Helper(97530),FVar(33) = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,25]) && EnemyNear(Var(54)),Time > Helper(97531),FVar(Var(49)) && P2bodydist X-35 >= (Helper(97534),Var(Var(49))%1000)

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 破防技蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Var(59) > 3
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,45]) && P2dist X >= 0) || (P2bodydist X < 45 && P2dist X >= 0)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -5) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Triggerall = (Random < Var(59)*150) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 400 || Stateno = 430) && Time > 9))
Trigger1 = (EnemyNear(Var(54)), Stateno = Helper(97530),Var(23)) && (EnemyNear(Var(54)), Time = [Helper(97530),FVar(17)-8,Helper(97530),Var(17)-6])
Trigger2 = (EnemyNear(Var(54)), Stateno = Helper(97530),Var(24)) && (EnemyNear(Var(54)), Time = [Helper(97530),FVar(18)-8,Helper(97530),Var(18)-6])

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 破防技站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Var(59) > 3
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,50]) && P2dist X >= 0) || (P2bodydist X < 50 && P2dist X >= 0)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Triggerall = (Random < Var(59)*150) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))
Trigger1 = (EnemyNear(Var(54)), Stateno = Floor((Helper(97530),Var(23))/1000)) && ((Helper(97530),Var(23))%1000 - EnemyNear(Var(54)), Time = [6,8])
Trigger2 = (EnemyNear(Var(54)), Stateno = Floor((Helper(97530),Var(24))/1000)) && ((Helper(97530),Var(24))%1000 - EnemyNear(Var(54)), Time = [6,8])

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 破防技蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = Var(59) > 3
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,36]) && P2dist X >= 0) || (P2bodydist X < 38 && P2dist X >= 0)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -10) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Triggerall = (Random < Var(59)*150) && EnemyNear(Var(54)),Stateno >= 160
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (EnemyNear(Var(54)), Stateno = Floor((Helper(97530),Var(23))/1000)) && ((Helper(97530),Var(23))%1000 - EnemyNear(Var(54)), Time = [4,5])
Trigger2 = (EnemyNear(Var(54)), Stateno = Floor((Helper(97530),Var(24))/1000)) && ((Helper(97530),Var(24))%1000 - EnemyNear(Var(54)), Time = [4,5])

;Trigger1 = Statetype = C
;Trigger1 = ctrl


;===========================================================================

;[抢招]

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**3)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [-5,28]) && P2dist X >= 0) || (P2bodydist X < 30 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 32 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Triggerall = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 750
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 4
Trigger1 = (Var(49) = [31,34]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 6

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**3)
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [-5,35]) && P2dist X >= 0) || (P2bodydist X < 39 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 35 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -36) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 750
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140))) || (Stateno = 200 && Time > 6)
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 4

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**3)
Triggerall = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [-5,36]) && P2dist X >= 0) || (P2bodydist X < 38 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 40 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -5) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 750
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 400 || Stateno = 430) && Time > 9))
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 5

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**3)
Triggerall = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [-5,40]) && P2dist X >= 0) || (P2bodydist X < 42 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 50 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 750
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 5

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Kung Fu Throw
;
[State -1, Kung Fu Throw 投78.1]
type = ChangeState
value = 800
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Stateno != [100,101]
Triggerall = Floor(Helper(97530),FVar(38)) % 1000 = 0
Triggerall = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**7))
Triggerall = P2bodydist X < 5 && P2dist X >= 0
Triggerall = (EnemyNear(Var(54)),Pos Y = [-5,5])
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 750
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,35]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 1

;Trigger1 = P2bodydist X < 3
;Trigger1 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger1 = EnemyNear(Var(54)),Movetype != H
;Trigger2 = P2bodydist X < 5
;Trigger2 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger2 = EnemyNear(Var(54)),Movetype != H

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 轻掌90.70.9]
type = ChangeState
value = 1000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*9 < 68 && P2dist X >= 0) || (P2bodydist X < 75 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*9 > 65 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Triggerall = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 9 + EnemyNear(Var(54)),const(movement.yaccel) * 9 * (9 + 1) / 2 > -36) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 800
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 9

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm 快掌95.150.11]
type = ChangeState
value = 1020
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = (EnemyNear(Var(54)),Stateno != [5000,5220))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**3)
Triggerall = ((P2bodydist X < 100 && EnemyNear(Var(54)),AnimTime <= -11) || (P2bodydist X < 150 && EnemyNear(Var(54)),AnimTime <= -18)) && P2dist X >= 0 && EnemyNear(Var(54)),Statetype != A
Triggerall = EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Numproj = 0 && Helper(97530),FVar(32) > 800
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Trigger1 = (Var(49) = [1,30]) && Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time > 11

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**5) && (EnemyNear(Var(54)),Stateno = [200,300)) 
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [-5,45]) && P2dist X >= 0) || (P2bodydist X < 42 && P2dist X >= 0)
Triggerall = EnemyNear(Var(54)),AnimTime <= -5 && EnemyNear(Var(54)),Statetype != A && EnemyNear(Var(54)),Numproj = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
trigger1 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(52)
trigger2 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(53)
trigger3 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(54)
trigger4 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(55)
trigger5 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(56)
trigger6 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(57)

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick 蹲重脚72.60.10]
type = ChangeState
value = 440
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = (Ceil(Helper(97530),FVar(39)) & 2**5) && (EnemyNear(Var(54)),Stateno = [200,300)) 
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*10 = [-5,48]) && P2dist X >= 0) || (P2bodydist X < 52 && P2dist X >= 0)
Triggerall = EnemyNear(Var(54)),AnimTime <= -10 && EnemyNear(Var(54)),Statetype != A && EnemyNear(Var(54)),Numproj = 0
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
trigger1 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(52)
trigger2 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(53)
trigger3 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(54)
trigger4 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(55)
trigger5 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(56)
trigger6 = EnemyNear(Var(54)),Stateno = Helper(97531),Var(57)

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)


;===========================================================================

;[(起攻、压制、抓受身、骗招、诈飞)]
;｜├[地上]
;｜└[空中]

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Trigger1 = Helper(97530),FVar(0) != 9
Trigger1 = EnemyNear(Var(54)),Stateno = 5120 && (P2bodydist X < 36+(Stateno = [100,101])*5 && P2dist X >= 0)
Trigger1 = (EnemyNear(Var(54)),AnimTime = [-1,0])
Trigger1 = EnemyNear(Var(54)),Vel X = 0
Trigger1 = Var(59) > 3
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (Helper(97530),FVar(32) <= 800)

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Trigger1 = Helper(97530),FVar(0) != 9
Trigger1 = EnemyNear(Var(54)),Stateno = 5120 && (P2bodydist X < 42 && P2dist X >= 0)
Trigger1 = (EnemyNear(Var(54)),AnimTime = [-1,0])
Trigger1 = EnemyNear(Var(54)),Vel X = 0
Trigger1 = Var(59) > 3
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (Helper(97530),FVar(32) > 800)
Trigger2 = Moveguarded && Stateno = 200 && Time > 6 && (P2bodydist X < 32 && P2dist X >= 0)
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 >= -40) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger2 = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger2 = Helper(97530),FVar(32) < 1000 - (EnemyNear(Var(54)),Statetype = S && P2bodydist X < 16) * 800

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Standing Strong Kick
;LbN
[State -1, Standing Strong Kick 站重脚63.54.8]
type = ChangeState
value = 240
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = EnemyNear(Var(54)),Statetype = S
Triggerall = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger1 = Moveguarded && Stateno = 200 && Time > 5
Trigger1 = P2bodydist X < 10 && P2dist X >= 0
Trigger2 = Moveguarded && Stateno = 230 && Time > 6
Trigger2 = P2bodydist X < 5 && P2dist X >= 0

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 5
;Trigger3 = (Stateno = 230) && Time > 6

;---------------------------------------------------------------------------
;Stand Strong Punch
;p`
[State -1, Stand Strong Punch 站重拳57.63.9]
type = ChangeState
value = 210
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -60))
Triggerall = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger1 = Moveguarded && Stateno = 200 && Time > 5+(EnemyNear(Var(54)),Statetype = A)
Trigger1 = P2bodydist X < 44 && P2dist X >= 0
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 9 + EnemyNear(Var(54)),const(movement.yaccel) * 9 * (9 + 1) / 2 >= -45) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger2 = Moveguarded && Stateno = 230 && Time > 6
Trigger2 = P2bodydist X < 30 && P2dist X >= 0
Trigger2 = EnemyNear(Var(54)),Statetype = S

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 5
;Trigger3 = (Stateno = 230) && Time > 6

;---------------------------------------------------------------------------
;Crouching Strong Punch
;p`
[State -1, Crouching Strong Punch 蹲重拳37.40.8]
type = ChangeState
value = 410
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -35)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -30)))
Trigger1 = Moveguarded && Stateno = 430 && Time > 5 && (P2bodydist X < 8 && P2dist X >= 0)
Trigger1 = EnemyNear(Var(54)),Statetype != A
Trigger1 = (EnemyNear(Var(54)),Stateno = [120,160))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = Helper(97530),FVar(0) != 9
Trigger1 = (EnemyNear(Var(54)),Stateno = 5120) && (P2bodydist X < 42+(Stateno = [100,101])*5 && P2dist X >= 0)
Trigger1 = (EnemyNear(Var(54)),AnimTime = [-2,-1])
Trigger1 = EnemyNear(Var(54)),Vel X = 0
Trigger1 = Var(59) > 3
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)) || ((Stateno = 400 || Stateno = 430) && Time > 9))
Trigger1 = (Helper(97530),FVar(32) < 150)
Trigger2 = Moveguarded && ((Stateno = 400) || (Stateno = 430)) && Time > 5 && (P2bodydist X < 25 && P2dist X >= 0)
Trigger2 = EnemyNear(Var(54)),Statetype != A
Trigger2 = (EnemyNear(Var(54)),Stateno = [120,160))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick 蹲重脚72.60.10]
type = ChangeState
value = 440
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = Moveguarded && Stateno = 430 && Time > 5 && (P2bodydist X < 36 && P2dist X >= 0)
Trigger1 = EnemyNear(Var(54)),Statetype != A
Trigger1 = (EnemyNear(Var(54)),Stateno = [120,160))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Trigger1 = Helper(97530),FVar(0) != 9
Trigger1 = EnemyNear(Var(54)),Stateno = 5120 && (P2bodydist X < 50 && P2dist X >= 0)
Trigger1 = (EnemyNear(Var(54)),AnimTime = [-2,-1])
Trigger1 = EnemyNear(Var(54)),Vel X = 0
Trigger1 = Var(59) > 3
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (Helper(97530),FVar(32) > 850)
Trigger2 = Moveguarded && Stateno = 200 && Time > 7 && (P2bodydist X < 28 && P2dist X >= 0)
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 >= -5) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = C
Trigger2 = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger3 = Moveguarded && Stateno = 230 && Time > 9 && (P2bodydist X < 21 && P2dist X >= 0)
Trigger3 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 >= -5) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = C
Trigger3 = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger4 = P2bodydist X < 45 && EnemyNear(Var(54)),Statetype != A && Helper(97530),FVar(34) = 5 && (Helper(97530),FVar(11) <= -7 || (Helper(97530),FVar(11) = [0,-1]))
Trigger4 = (EnemyNear(Var(54)),Stateno = [150,160))
Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 200 && Time > 7) || (Stateno = 230 && Time > 9))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Light Kung Fu Blow
[State -1, Light Kung Fu Blow 轻击100.70.14]
type = ChangeState
value = 1200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = Moveguarded && P2dist X >= 0
Triggerall = EnemyNear(Var(54)),Statetype != A
Triggerall = (EnemyNear(Var(54)),Stateno = [120,160))
Trigger1 = Stateno = 210 && P2bodydist X < 36
Trigger2 = Stateno = 240 && P2bodydist X < 32
Trigger3 = Stateno = 410 && P2bodydist X < 25
Trigger4 = Stateno = 430 && (P2bodydist X = [36,44])
Trigger4 = Helper(97530),FVar(32) < 200
Trigger5 = Stateno = 230 && (P2bodydist X = [27,35])
Trigger5 = Helper(97530),FVar(32) > 950

;trigger1 = var(1)

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = Random < 900
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = (P2bodydist X-EnemyNear(Var(54)),Vel X*4 < 40 && P2dist X >= 0) || (P2bodydist X < 42 && P2dist X >= 0 && EnemyNear(Var(54)),Backedgebodydist < 10)
Triggerall = Var(59) > 3
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 200 && Time > 6))
Trigger1 = (EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Time > (15-4))
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 > -40) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = EnemyNear(Var(54)),Stateno = 5200
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 < 5) && EnemyNear(Var(54)),Statetype = A)

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = Random < 900
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [-5,45]) && P2dist X >= 0) || (P2bodydist X < 45 && P2dist X >= 0 && EnemyNear(Var(54)),Backedgebodydist < 10)
Triggerall = Var(59) > 3
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || ((Stateno = 200) && Time > 7) || ((Stateno = 230) && Time > 9))
Trigger1 = (EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Time > (15-5))
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),gethitvar(yaccel) * 5 * (5 + 1) / 2 > -5) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0)

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = Random < 900
Triggerall = ((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [-5,30]) && P2dist X >= 0) || (P2bodydist X < 35 && P2dist X >= 0 && EnemyNear(Var(54)),Backedgebodydist < 10)
Triggerall = Var(59) > 3
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger1 = (EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Time > (15-4))
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 >= -10) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = EnemyNear(Var(54)),Stateno = 5200
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 < 10) && EnemyNear(Var(54)),Statetype = A)

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = (Pos Y + Vel Y * 4 + Const(movement.yaccel) * 4 * (4+1) / 2 < 0)
Triggerall = Random < 900
Trigger1 = (P2bodydist X-Vel X*4-EnemyNear(Var(54)),Vel X*4 = [-5,35]) || (P2bodydist X < 30 && P2dist X >= 0 && EnemyNear(Var(54)),Backedgebodydist < 10)
Trigger1 = EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Time > (15-4)
Trigger1 = ((P2dist Y - Vel Y * 4 - const(movement.yaccel) * 4 * (4 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-25,25]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Var(59) > 3
Trigger1 = ctrl || (Stateno = 600 && statetime >= 7)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0)
Triggerall = Random < 900
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,50]) || (P2bodydist X < 45 && P2dist X >= 0 && EnemyNear(Var(54)),Backedgebodydist < 10)
Trigger1 = EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Time > (15-7)
Trigger1 = ((P2dist Y - Vel Y * 7 - const(movement.yaccel) * 7 * (7 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 7 + EnemyNear(Var(54)),gethitvar(yaccel) * 7 * (7 + 1) / 2 = [-5,50]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Var(59) > 3
Trigger1 = ctrl

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-7))
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0)
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = Stateno = 600 && Moveguarded
Trigger1 = ((P2dist Y - Vel Y * 7 - const(movement.yaccel) * 7 * (7 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 7 + EnemyNear(Var(54)),const(movement.yaccel) * 7 * (7 + 1) / 2 = [-5,50]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7= [-5,57]) || (P2bodydist X < 48 && P2dist X >= 0)
Trigger2 = ((Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0) && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C))
Trigger2 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7= [-5,52]) || (P2bodydist X < 48 && P2dist X >= 0)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) = 5
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5200)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Var(59) > 3
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Triggerall = Helper(97530),FVar(33) != 2
Trigger1 = ((P2bodydist X = [100,150]) && Random < 25*Var(59)*(1+(Stateno=19))) || ((P2bodydist X = [75,100]) && Random < 15*Var(59)*(1+(Stateno=19)))
Trigger1 = EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C
Trigger1 = EnemyNear(Var(54)),Movetype = I && EnemyNear(Var(54)),ctrl
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger2 = P2bodydist X < 25 && (EnemyNear(Var(54)),Stateno = [5000,5070)) && EnemyNear(Var(54)),Movetype = H 
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -40) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = Helper(97530),FVar(10) != 1 && Helper(97530),FVar(1) = 9

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = !inguarddist
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Trigger1 = (P2bodydist X-Vel X-EnemyNear(Var(54)),Vel X > 75) || (P2bodydist X = [75,135])
Trigger1 = (Pos Y + Vel Y * 1 + Const(movement.yaccel) * 1 * (1+1) / 2 > 0) && Vel Y > 0
Trigger1 = EnemyNear(Var(54)),Movetype = I && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C)
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = Var(59) > 3
Trigger1 = ctrl && (Helper(97530),FVar(32) < 150*Var(59))

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
[State -1, 压制前跑]
type = ChangeState
value = 101
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
;Triggerall = Frontedgebodydist > 60
Triggerall = !inguarddist
Triggerall = (Stateno != [100,101])
Triggerall = ctrl || (Stateno = [19,21])
Trigger1 = P2bodydist X - (Helper(97530),FVar(34)-1-4)*4.6 + EnemyNear(Var(54)),Vel X*(1-(Helper(97530),FVar(23))**(Floor(Helper(97530),FVar(34))))/(1-(Helper(97530),FVar(23))) < 42
Trigger1 = EnemyNear(Var(54)),Movetype = H && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C) && (EnemyNear(Var(54)),Stateno = [120,160))
Trigger2 = P2bodydist X > 135 && ((EnemyNear(Var(54)),Stateno = [5200,5220)) || (EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Statetype = A))

;===========================================================================

;[(连招、目押、地面追击)]
;｜├[地上]
;｜└[空中]

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
;[State -1, Crouching Light Punch 蹲轻拳23.38.4]
;type = ChangeState
;value = 400
;Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
;Triggerall = Var(59) > 0
;Triggerall = Roundstate = 2
;Triggerall = Statetype != A
;Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
;Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-4))
;Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
;Triggerall = Helper(97530),FVar(37) >= 5
;Trigger1 = (P2bodydist X < 15 && P2dist X >= 0 && Helper(97530),FVar(34) >= 5) || (Var(56) > 0 && (P2bodydist X < 36 && P2dist X >= 0 && Helper(97530),FVar(34) <= 5))
;Trigger1 = (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C) && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5000
;Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-4))
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = Helper(97530),FVar(37) >= 1
Triggerall = Helper(97530),FVar(33) != 5 && !(Var(56) < 0 && Helper(97530),FVar(10) = 12)
Trigger1 = (Stateno = 200 && Time > 6)
Trigger1 = ((P2bodydist X = [0,25]) && EnemyNear(Var(54)),Statetype = S)
Trigger1 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger2 = (Stateno = 200 && Time > 6) && (P2bodydist X = [0,40])
Trigger2 = EnemyNear(Var(54)),Pos Y > -35 && EnemyNear(Var(54)),Statetype = A
Trigger2 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger3 = (Facing = 1 && Abs(helper(97533),RootDist X) < 75) || (Facing = -1 && Abs(helper(97532),RootDist X) < 75)
Trigger3 = P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && Helper(97530),FVar(10) != 1 && Helper(97530),FVar(10) != 4
Trigger3 = (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-35,-15]) && EnemyNear(Var(54)),Statetype = A
Trigger3 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger4 = (P2bodydist X - EnemyNear(Var(54)),Vel X*4*ifelse((facing != EnemyNear(Var(54)),facing),1,-1) = [-10,30]) && EnemyNear(Var(54)),Movetype = H && (Helper(97530),FVar(37) = [5,7]) && Helper(97530),FVar(10) != 4 && Helper(97530),FVar(1) < 9
Trigger4 = (P2bodydist X - EnemyNear(Var(54)),Vel X*4*ifelse((facing != EnemyNear(Var(54)),facing),1,-1) > 25) || (Helper(97530),FVar(32) < (500 + Helper(97530),FVar(1) * 250))
Trigger4 = (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-35,-15]) && EnemyNear(Var(54)),Statetype = A
Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger5 = (P2bodydist X - EnemyNear(Var(54)),Vel X*4*ifelse((facing != EnemyNear(Var(54)),facing),1,-1) = [-10,30]) && EnemyNear(Var(54)),Movetype = H && (Helper(97530),FVar(37) = [5,7]) && Helper(97530),FVar(10) != 4 && Helper(97530),FVar(1) < 9
Trigger5 = (EnemyNear(Var(54)),life = (110*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence),(160+35*(Power>=1000))*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence)])
Trigger5 = (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-35,-15]) && EnemyNear(Var(54)),Statetype = A
Trigger5 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger6 = (P2bodydist X < 3 && P2dist X >= 0 && Helper(97530),FVar(34) >= 5) || (P2bodydist X < 40 && P2dist X >= 0 && Helper(97530),FVar(34) <= 5)
Trigger6 = EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5000 && Helper(97530),FVar(33) = 12
Trigger6 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-5))
Triggerall = Helper(97530),FVar(37) >= 4
Trigger1 = (Stateno = 230 && Time > 9) && (P2bodydist X = [0,5])
Trigger1 = (EnemyNear(Var(54)),Pos Y > -8 && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger2 = (P2bodydist X < 50 && (P2bodydist X - Const(velocity.run.fwd.x) > 36) && P2dist X >= 0 && Helper(97530),FVar(34) = 6)
Trigger2 = (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C) && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5000
Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Standing Strong Kick
;LbN
[State -1, Standing Strong Kick 站重脚63.54.8]
type = ChangeState
value = 240
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-8))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = Helper(97530),FVar(37) >= 5 && Helper(97530),FVar(34) > 9
Trigger1 = (Stateno = 200 && Time > 5) && (P2bodydist X = [0,32])
Trigger1 = (EnemyNear(Var(54)),Pos Y > -12 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger1 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && Random < (Life - EnemyNear(Var(54)),Life) / 2 + 100
Trigger2 = (Stateno = 230 && Time > 6) && (P2bodydist X = [0,21])
Trigger2 = (EnemyNear(Var(54)),Pos Y > -8 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger2 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 5
;Trigger3 = (Stateno = 230) && Time > 6

;---------------------------------------------------------------------------
;Stand Strong Punch
;p`
[State -1, Stand Strong Punch 站重拳57.63.9]
type = ChangeState
value = 210
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-9))
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -60))
Triggerall = Helper(97530),FVar(37) >= 4 && Helper(97530),FVar(34) > 9
Trigger1 = (Stateno = 200 && Time > 5) && (P2bodydist X = [24,44])
Trigger1 = (EnemyNear(Var(54)),Pos Y > -35 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger1 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger2 = (Stateno = 230 && Time > 6) && (P2bodydist X = [0,35])
Trigger2 = (EnemyNear(Var(54)),Pos Y > -35 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger2 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 5
;Trigger3 = (Stateno = 230) && Time > 6

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick 蹲重脚72.60.10]
type = ChangeState
value = 440
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-10))
Triggerall = (Stateno != [100,101]) && Prevstateno != 440
Triggerall = Helper(97530),FVar(37) >= 7
Triggerall = Var(59) > 3
Trigger1 = Helper(97530),FVar(3) = 2
Trigger1 = (P2bodydist X = [0,50]) && EnemyNear(Var(54)),Movetype = H
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 3 + EnemyNear(Var(54)),gethitvar(yaccel) * 3 * (3 + 1) / 2 >= 0 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = L)
Trigger1 = !(EnemyNear(Var(54)),Stateno = 5110 && EnemyNear(Var(54)),Const(data.liedown.time) - Floor(Helper(97530),FVar(29))%1000 < 15)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Trigger2 = Stateno = 430 && Time > 5 && (P2bodydist X = [0,30]) && EnemyNear(Var(54)),Statetype != A
Trigger2 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && Random < (Life - EnemyNear(Var(54)),Life) / 5 + 50

;Trigger1 = (Stateno = 430 && Time > 5) && (P2bodydist X = (20,52]) && (EnemyNear(Var(54)),Pos Y = [-10,0])
;Trigger1 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Crouching Strong Punch
;p`
[State -1, Crouching Strong Punch 蹲重拳37.40.8]
type = ChangeState
value = 410
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Stateno != [5080,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-8))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -35)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -30)))
Triggerall = Helper(97530),FVar(37) >= 6
Triggerall = Helper(97530),FVar(33) != 5 && !(Var(56) < 0 && Helper(97530),FVar(10) = 12)
Trigger1 = (Stateno = 400 && Time > 5) && (P2bodydist X = [0,12+(EnemyNear(Var(54)),Statetype = S)*3])
Trigger1 = (EnemyNear(Var(54)),Pos Y > -12 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger1 = Movehit && P2dist X >= 0
Trigger2 = (Stateno = 430 && Time > 5) && (P2bodydist X = [0,27])
Trigger2 = (EnemyNear(Var(54)),Pos Y > -12 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger2 = Movehit && P2dist X >= 0 && Helper(97530),FVar(37) >= 10

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-5))
Triggerall = Helper(97530),FVar(37) >= 5
Triggerall = Helper(97530),FVar(10) != 1
Trigger1 = Stateno = 400 && Time > 5 && (P2bodydist X = [0,27]) && EnemyNear(Var(54)),Statetype != A
Trigger1 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger2 = Stateno = 430 && Time > 5 && (P2bodydist X = [0,24]) && EnemyNear(Var(54)),Statetype != A
Trigger2 = Movehit && P2dist X >= 0 && (EnemyNear(Var(54)),Movetype = H || !(Power >= 1000 && Random < 300))
Trigger3 = (P2bodydist X = [-3,45]) && EnemyNear(Var(54)),Movetype = H
Trigger3 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 1 + EnemyNear(Var(54)),gethitvar(yaccel) * 1 * (1 + 1) / 2 > 0 && EnemyNear(Var(54)),Statetype = A && Stateno != 430) || EnemyNear(Var(54)),Statetype = L)
Trigger3 = !(Helper(97530),FVar(3) = 2 && (Helper(97530),FVar(37) = [7,9))) ;&& (EnemyNear(Var(54)),Stateno = [5080,5120))
Trigger3 = !(EnemyNear(Var(54)),Stateno = 5110 && EnemyNear(Var(54)),Const(data.liedown.time) - Floor(Helper(97530),FVar(29))%1000 < 8)
Trigger3 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 430 && Movehit && Time > 5)) && Var(59) > 3

;Trigger3 = (P2bodydist X - EnemyNear(Var(54)),Vel X*5 = [0,45]) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H
;Trigger3 = (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 3 + EnemyNear(Var(54)),gethitvar(yaccel) * 3 * (3 + 1) / 2 > 0)
;Trigger3 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101])) && Var(59) > 2
; && EnemyNear(Var(54)),Backedgebodydist > 5

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Jump Strong Punch
[State -1, Jump Strong Punch 跳重拳72.45.7]
type = ChangeState
value = 610
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = !inguarddist
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-7))
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0)
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = Stateno = 600 && Movehit && P2dist X >= 0
Trigger1 = ((P2dist Y = [-15,35]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [0,45])

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-7))
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0)
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = Stateno = 600 && Movehit
Triggerall = !(EnemyNear(Var(54)),Statetype = S && Helper(97530),FVar(33) = 12 && EnemyNear(Var(54)),Movetype = H)
Trigger1 = ((P2dist Y = [-5,50]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,54]) || (P2bodydist X < 48 && P2dist X >= 0)
Trigger2 = (((Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0) || Helper(97530),FVar(34) = 8) && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C))
Trigger2 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,52]) || (P2bodydist X < 48 && P2dist X >= 0)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-4))
Triggerall = Helper(97530),FVar(37) >= 2
Triggerall = (Stateno = 600 && statetime >= 7) && (P2bodydist X = [0,32])
Triggerall = Movecontact && P2dist X >= 0
Trigger1 = ((P2dist Y = [-20,20]) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = (((Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 >= 0) || Helper(97530),FVar(34) = 5) && EnemyNear(Var(54)),Statetype = S)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper 超升龙155+70.8]
type = ChangeState
value = 3050
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = !inguarddist
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-8))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = EnemyNear(Var(54)),life < 170 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence) || ((((EnemyNear(Var(54)),Pos Y = [-50,0]) && EnemyNear(Var(54)),Statetype = A) || Helper(97530),FVar(2) > 0) && Power >= 2000)
Trigger1 = P2bodydist X < 12 && P2dist X >= 0 && (Stateno = [1000,1020)) && Movehit && EnemyNear(Var(54)),Movetype = H
Trigger2 = EnemyNear(Var(54)),life > 100 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence) && (EnemyNear(Var(54)),Pos Y = [-50,0]) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H
Trigger2 = P2bodydist X < 27 && P2dist X >= 0 && Stateno = 200 && Movehit
Trigger2 = (Helper(97530),FVar(1) < 9) && (Helper(97530),FVar(37) = [4,7])
Trigger2 = Power > 2800 || (EnemyNear(Var(54)),life = [125*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence),170*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence)])

;Trigger3 = Power >= 2000 || EnemyNear(Var(54)),life < 155 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)
;Trigger3 = P2bodydist X < 25 && P2dist X >= 0 && Stateno = 440 && Movehit && EnemyNear(Var(54)),Movetype = H

;Trigger1 = ctrl
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3050,3100)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Triple Kung Fu Palm (uses one super bar)
;OJt[iQ[WxPj
[State -1, Triple Kung Fu Palm 超三连掌72+72+75.14]
type = ChangeState
value = 3000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = !inguarddist
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-14))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = (P2bodydist X = [0,68]) && !(EnemyNear(Var(54)),Statetype = A && Helper(97530),FVar(2) = 9) 
Triggerall = (Stateno = [1000,1020)) && AnimElemNo(0) = 6
Triggerall = Movehit && EnemyNear(Var(54)),Movetype = H
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = EnemyNear(Var(54)),Statetype != A
Trigger2 = EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Pos Y > -25

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Statetype != A
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3000,3050)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Smash Kung Fu Upper (uses one super bar)
;X}bVEJt[EEbp[iQ[WxPj
[State -1, Smash Kung Fu Upper 超升龙155+70.8]
type = ChangeState
value = 3050
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 1000
Triggerall = Statetype != A
Triggerall = !inguarddist
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-8))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = Stateno = 3000 && Movehit && hitcount >= 2 && (AnimElemNo(0) = 14) && (Power >= 1800 || EnemyNear(Var(54)),life <= 170 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence))
Trigger1 = Frontedgebodydist <= 48 && EnemyNear(Var(54)),life > 100 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence) && EnemyNear(Var(54)),Movetype = H
Trigger2 = (Stateno = [1100,1120)) && Movehit && (AnimElemNo(0) = 3)
Trigger2 = EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H
Trigger2 = (EnemyNear(Var(54)),life = (60*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence),170*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence)]) && (life < 450 || Power >= 1800)
Trigger3 = (Stateno = [1100,1120)) && Movehit && (AnimElemNo(0) = 3)
Trigger3 = EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H
Trigger3 = EnemyNear(Var(54)),life >= 55 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence) && (Helper(97530),FVar(37) = [4,7]) && Power >= 2800
Trigger3 = Helper(97530),FVar(1) = 1 && Helper(97530),FVar(32) < Power/30

;Trigger4 = (P2bodydist X - EnemyNear(Var(54)),Vel X*8 = [0,32]) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),life >= 100 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)
;Trigger4 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 8 + EnemyNear(Var(54)),gethitvar(yaccel) * 8 * (8 + 1) / 2 = [-90,-20]) && EnemyNear(Var(54)),Statetype = A)
;Trigger4 = (Helper(97530),FVar(1) < 9) && (Helper(97530),FVar(37) = [4,7]) && (Power > 2700 || EnemyNear(Var(54)),life <= 180 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)) 
;Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = ctrl
;Trigger2 = hitdefattr = SC, NA, SA, HA
;Trigger2 = Stateno != [3050,3100)
;Trigger2 = Movecontact

;---------------------------------------------------------------------------
;Fast Kung Fu Blow (1/3 super bar)
[State -1, Fast Kung Fu Blow 快击125.70.10]
type = ChangeState
value = 1220
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-10))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = Helper(97530),FVar(37) >= 6
Triggerall = (P2bodydist X = [0+(Stateno = 400)*32,45]) && Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H
Triggerall = EnemyNear(Var(54)),Statetype != A && (EnemyNear(Var(54)),life = (100*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence),125*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence)])
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = Stateno = 210 || Stateno = 230 || Stateno = 240
Trigger1 = (Stateno = 400 && (Var(56) > 0 && Var(56) <= Ceil(Helper(97530),FVar(11)/10))) || (Stateno = 410 && (EnemyNear(Var(54)),Statetype = C || (EnemyNear(Var(54)),Statetype = S && (AnimElemNo(0) = 5)))) || Stateno = 430

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Light Kung Fu Blow
[State -1, Light Kung Fu Blow 轻击100.70.14]
type = ChangeState
value = 1200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-14))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H
Triggerall = EnemyNear(Var(54)),Statetype != A && ((EnemyNear(Var(54)),life < 125*Const(data.attack)/EnemyNear(Var(54)),Const(data.defence)) || (Random < (Life - EnemyNear(Var(54)),Life) / 5 + 500*(Power<330)))
Triggerall = (Facing = 1 && Abs(helper(97533),RootDist X) > 150) || (Facing = -1 && Abs(helper(97532),RootDist X) > 150)
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = Stateno = 210 && (P2bodydist X = [0,36])
Trigger2 = Stateno = 240 && (P2bodydist X = [0,32])
Trigger3 = (Stateno = 410 && (EnemyNear(Var(54)),Statetype = C || (EnemyNear(Var(54)),Statetype = S && (AnimElemNo(0) = 5)))) && (P2bodydist X = [0,25])

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm 快掌95.150.11]
type = ChangeState
value = 1020
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-11))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = Helper(97530),FVar(37) >= 6
Triggerall = Helper(97530),FVar(33) != 5
Triggerall = Var(59) > 3
Triggerall = Power < 1500 || (Power >= 1500 && Helper(97530),FVar(32) < 1600-Power*2/5) || Helper(97530),FVar(2) = 9
Triggerall = Stateno = 210 || Stateno = 230 || Stateno = 240
Triggerall = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),life > 90 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)
Trigger1 = (P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21,90-(Stateno = 230||Stateno = 430)*15]) && EnemyNear(Var(54)),Statetype != A
Trigger2 = (P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27,75]) && (Stateno != [410,430])
Trigger2 = EnemyNear(Var(54)),Pos Y > -25 && EnemyNear(Var(54)),Statetype = A && Helper(97530),FVar(37) >= 10

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm 快掌95.150.11]
type = ChangeState
value = 1020
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-11))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = Helper(97530),FVar(37) >= 6
Triggerall = Var(59) > 3
Triggerall = Power < 1500 || (Power >= 1500 && Helper(97530),FVar(32) < 1600-Power*2/5) || Helper(97530),FVar(2) = 9
Triggerall = (Stateno = 400 && (Var(56) > 0 && Var(56) <= Ceil(Helper(97530),FVar(11)/10))) || (Stateno = 410 && (EnemyNear(Var(54)),Statetype = C || (EnemyNear(Var(54)),Statetype = S && (AnimElemNo(0) = 5)))) || Stateno = 430
Triggerall = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),life > 90 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = (P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21,90-(Stateno = 230||Stateno = 430)*15]) && EnemyNear(Var(54)),Statetype != A
Trigger2 = (P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27,75]) && (Stateno != [410,430])
Trigger2 = EnemyNear(Var(54)),Pos Y > -25 && EnemyNear(Var(54)),Statetype = A && Helper(97530),FVar(37) >= 10

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Strong Kung Fu Blow
[State -1, Strong Kung Fu Blow 重击125.70.18]
type = ChangeState
value = 1210
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-9))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -50)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -45)))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = (P2bodydist X - EnemyNear(Var(54)),Vel X*18 = [20,60])
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 18 + EnemyNear(Var(54)),gethitvar(yaccel) * 18 * (18 + 1) / 2 = [-30,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = EnemyNear(Var(54)),life < 120 * Const(data.attack) / EnemyNear(Var(54)),Const(data.defence)
Trigger1 = P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && ((Helper(97530),FVar(37) = [4,7]) || EnemyNear(Var(54)),Stateno = 1028)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;+++
;Trigger2 =

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Strong Kung Fu Upper
;Jt[EEbp[ij
[State -1, Strong Kung Fu Upper 重升龙57.(5,12)]
type = ChangeState
value = 1110
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-10))
Triggerall = Var(1)
Triggerall = Helper(97530),FVar(37) >= 4
;Triggerall = EnemyNear(Var(54)),Stateno != [1027,1028]
Triggerall = !(Facing = -1 && Abs(helper(97532),RootDist X) < 35 && Abs(helper(97532),RootDist X) <= Abs(helper(97532),P2dist X))
Triggerall = !(Facing = 1 && Abs(helper(97533),RootDist X) < 35 && Abs(helper(97533),RootDist X) <= Abs(helper(97533),P2dist X))
Triggerall = (Helper(97530),FVar(32) < 150*Var(59) && Var(59) < 4) || Var(59) > 3
Triggerall = !(Var(56) < 0 && Helper(97530),FVar(10) = 12)
Trigger1 = ((Stateno = 200 || Stateno = 400) && (P2bodydist X = [0,20])) || ((Stateno = 210 || Stateno = 410) && (P2bodydist X = [0,15]))
Trigger1 = (EnemyNear(Var(54)),Pos Y > -30 && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Movehit && EnemyNear(Var(54)),Movetype = H && Helper(97530),FVar(37) = 15 ;&& Helper(97530),FVar(1) < 9
Trigger2 = (P2bodydist X - EnemyNear(Var(54)),Vel X*5 = [-10,27]) && EnemyNear(Var(54)),Movetype = H
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),gethitvar(yaccel) * 5 * (5 + 1) / 2 = [-25,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101])) && Var(59) > 2 && ((Helper(97530),FVar(1) < 9 && (Helper(97530),FVar(32) >= (500 + Helper(97530),FVar(1) * 250))) || EnemyNear(Var(54)),Stateno = 1028)
Trigger3 = Helper(97530),FVar(10) = 3 && Frontedgebodydist < 50 && Helper(97530),FVar(1) = 0 ;(Prevstateno = [800,830))
Trigger3 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),gethitvar(yaccel) * 5 * (5 + 1) / 2 = [-25,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger3 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Light Kung Fu Upper
;Jt[EEbp[ij
[State -1, Light Kung Fu Upper 轻升龙52.(4,10)]
type = ChangeState
value = 1100
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-10))
Triggerall = Var(1)
Triggerall = Helper(97530),FVar(37) >= 4
;Triggerall = EnemyNear(Var(54)),Stateno != [1027,1028]
Triggerall = !(Facing = -1 && Abs(helper(97532),RootDist X) < 35 && Abs(helper(97532),RootDist X) <= Abs(helper(97532),P2dist X))
Triggerall = !(Facing = 1 && Abs(helper(97533),RootDist X) < 35 && Abs(helper(97533),RootDist X) <= Abs(helper(97533),P2dist X))
Triggerall = (Helper(97530),FVar(32) < 150*Var(59) && Var(59) < 4) || Var(59) > 3
Triggerall = !(Var(56) < 0 && Helper(97530),FVar(10) = 12)
Trigger1 = ((Stateno = 200 || Stateno = 400) && (P2bodydist X = [0,20])) || ((Stateno = 210 || Stateno = 410) && (P2bodydist X = [0,15]))
Trigger1 = (EnemyNear(Var(54)),Pos Y > -30 && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Movehit && EnemyNear(Var(54)),Movetype = H && Helper(97530),FVar(37) = 15 ;&& Helper(97530),FVar(1) < 9
Trigger2 = (P2bodydist X - EnemyNear(Var(54)),Vel X*4 = [-10,25]) && EnemyNear(Var(54)),Movetype = H
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-25,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101])) && Var(59) > 2 && ((Helper(97530),FVar(1) < 9 && (Helper(97530),FVar(32) >= (500 + Helper(97530),FVar(1) * 250))) || EnemyNear(Var(54)),Stateno = 1028)
Trigger3 = Helper(97530),FVar(10) = 3 && Frontedgebodydist < 40 && Helper(97530),FVar(1) = 0
Trigger3 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 = [-25,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger3 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Strong Kung Fu Knee
;Jt[Rij
[State -1, Strong Kung Fu Knee 重膝90.8]
type = ChangeState
value = 1060
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5210)
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-8))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = !(Var(56) < 0 && Helper(97530),FVar(10) = 12)
Trigger1 = ((Stateno = 200 || Stateno = 400) && (P2bodydist X = [0,39])) || ((Stateno = 210 || Stateno = 230 || Stateno = 410) && (P2bodydist X = [0,21-(Stateno = 410)*3]))
Trigger1 = (EnemyNear(Var(54)),Pos Y = [-60,-5]) && EnemyNear(Var(54)),Statetype = A
Trigger1 = Movehit && EnemyNear(Var(54)),Movetype = H

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Light Kung Fu Palm
;Jt[ij
[State -1, Light Kung Fu Palm 轻掌90.85.9]
type = ChangeState
value = 1000
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-9))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = ((P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21,70]) || (Frontedgebodydist < 75 && P2bodydist X > ((Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21)))
Trigger1 = (EnemyNear(Var(54)),Pos Y > -25 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger1 = (Stateno = 200 && Movehit = 1) || Stateno = 210 || Stateno = 230 || Stateno = 240
Trigger1 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H
Trigger2 = ((P2bodydist X = [(Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21,70]) || (Frontedgebodydist < 75 && P2bodydist X > ((Stateno = 200)*40+(Stateno = 230)*27+(Stateno = 400)*27+(Stateno = 430)*21)))
Trigger2 = (EnemyNear(Var(54)),Pos Y > -25 && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype != A
Trigger2 = (Stateno = 400 && (Var(56) > 0 && Var(56) <= Ceil(Helper(97530),FVar(11)/10))) || (Stateno = 410 && (EnemyNear(Var(54)),Statetype = C || (EnemyNear(Var(54)),Statetype = S && (AnimElemNo(0) = 5)))) || Stateno = 430
Trigger2 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H
Trigger3 = Stateno = 430 && ((Facing = 1 && Abs(helper(97533),RootDist X) < 100) || (Facing = -1 && Abs(helper(97532),RootDist X) < 100))
Trigger3 = EnemyNear(Var(54)),Pos Y > -5 && EnemyNear(Var(54)),Statetype = A
Trigger3 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H

;Trigger2 = (P2bodydist X - EnemyNear(Var(54)),Vel X*9  = [20,75]) && EnemyNear(Var(54)),Movetype = H
;Trigger2 = !(P2bodydist X - EnemyNear(Var(54)),Vel X*4 - Const(velocity.run.fwd.x)*4 < 20 && (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),gethitvar(yaccel) * 4 * (4 + 1) / 2 < -30) && EnemyNear(Var(54)),Statetype = A)
;Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 9 + EnemyNear(Var(54)),gethitvar(yaccel) * 9 * (9 + 1) / 2 = [-30,-5]) && EnemyNear(Var(54)),Statetype = A)
;Trigger2 = P2dist X >= 0 && (Helper(97530),FVar(1) < 9 || EnemyNear(Var(54)),Stateno = 1028) && EnemyNear(Var(54)),Backedgebodydist > 5
;Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
;Fast Kung Fu Palm (1/3 super bar)
;Jt[iQ[WxP^Rj
[State -1, Fast Kung Fu Palm 快掌95.150.11]
type = ChangeState
value = 1020
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Power >= 330
Triggerall = Var(1)
Triggerall = EnemyNear(Var(54)),Stateno != [5070,5210]
Triggerall = !((EnemyNear(Var(54)),Stateno = [5210,5220)) && EnemyNear(Var(54)),Time <= (15-11))
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -45)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -40)))
Triggerall = Helper(97530),FVar(37) >= 6
Triggerall = (Helper(97530),FVar(32) < 300*Var(59) && Var(59) < 3) || Var(59) > 2
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = (P2bodydist X = (50,75])
Trigger1 = (EnemyNear(Var(54)),Pos Y > -25 && EnemyNear(Var(54)),Statetype = A && (Stateno != [410,430])) || EnemyNear(Var(54)),Statetype != A
Trigger1 = (Stateno = 210 || Stateno = 230 || Stateno = 240 || (Stateno = 400 && (Var(56) > 0 && Var(56) <= Ceil(Helper(97530),FVar(11)/10))) || (Stateno = 410 && (AnimElemNo(0) = 5))) || Stateno = 430
Trigger1 = Movehit && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H
Trigger2 = (P2bodydist X - EnemyNear(Var(54)),Vel X*11 = [60,125]) && P2dist X >= 0 && EnemyNear(Var(54)),Movetype = H && Helper(97530),FVar(10) = 1 && Helper(97530),FVar(37) >= 10
Trigger2 = !(P2bodydist X - EnemyNear(Var(54)),Vel X*7 - Const(velocity.run.fwd.x)*7 < 20 && (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 11 + EnemyNear(Var(54)),gethitvar(yaccel) * 11 * (11 + 1) / 2 < -25) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 11 + EnemyNear(Var(54)),gethitvar(yaccel) * 11 * (11 + 1) / 2 = [-35,-5]) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Var(1)

;---------------------------------------------------------------------------
[State -1, 追击前跑]
type = ChangeState
value = 101
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Frontedgebodydist >= 20
Triggerall = !inguarddist
Triggerall = (Stateno != [100,101])
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = Helper(97530),FVar(11) > -6 
Trigger1 = EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Statetype != L
Trigger1 = (Helper(97530),FVar(37) >= 4 && P2bodydist X > 15) || (Helper(97530),FVar(37) < 4 && (P2bodydist X > 60 || (P2bodydist X > 15 && Helper(97530),FVar(1) = 9)))

;---------------------------------------------------------------------------
;[State -1, 追击向前走]
;type = ChangeState
;value = 21
;Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
;Triggerall = Var(59) > 0
;Triggerall = Roundstate = 2
;Triggerall = Statetype != A
;Triggerall = Frontedgebodydist >= 20
;Triggerall = !inguarddist
;Triggerall = Stateno != 20 && Stateno != 100
;Triggerall = ctrl
;Trigger1 = EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Statetype = A
;Trigger1 = Helper(97530),FVar(37) >= 4 && (P2bodydist X = [15,25))


;===========================================================================

;[立回]

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !((EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -40)) || (EnemyNear(Var(54)),Statetype = C && (EnemyNear(Var(54)),Const(size.mid.pos.y) > -35)))
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 9
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,30+(Stateno = [100,101])*5]) && P2dist X >= 0) || (P2bodydist X < 36+(Stateno = [100,101])*5 && P2dist X >= 0))
Trigger1 = !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 38+(Stateno = [100,101])*5 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Helper(97530),FVar(31) = [500*Var(59)/5,900*Var(59)/5]) || ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 < 0) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))

;Trigger1 = Statetype = C
;Trigger1 = ctrl

;---------------------------------------------------------------------------
;Kung Fu Throw
;
[State -1, Kung Fu Throw 投78.1]
type = ChangeState
value = 800
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = Stateno != [100,101]
Triggerall = Floor(Helper(97530),FVar(38)) % 1000 = 0
Triggerall = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
Triggerall = EnemyNear(Var(54)),Stateno != [5000,5220)
Triggerall = EnemyNear(Var(54)),Pos Y = [-5,5]
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**4 + 2**7))
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Trigger1 = P2bodydist X < 5 && P2dist X >= 0
Trigger1 = EnemyNear(Var(54)),Numproj = 0 && EnemyNear(Var(54)),Movetype = I
Trigger1 = (Helper(97530),FVar(31) > 1000-20*Var(59)-Random/10)

;Trigger1 = P2bodydist X < 3
;Trigger1 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger1 = EnemyNear(Var(54)),Movetype != H
;Trigger2 = P2bodydist X < 5
;Trigger2 = (EnemyNear(Var(54)),Statetype = S) || (EnemyNear(Var(54)),Statetype = C)
;Trigger2 = EnemyNear(Var(54)),Movetype != H

;---------------------------------------------------------------------------
;Stand Light Punch
;p`
[State -1, Stand Light Punch 站轻拳23.44.4]
type = ChangeState
value = 200
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Statetype != C
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 1
Triggerall = !(EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Const(size.head.pos.y) > -70))
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*4 = [0,36]) && P2dist X >= 0) || (P2bodydist X < 40 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*4 > 45 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 > -30-(Random%10)) && EnemyNear(Var(54)),Statetype = A) || EnemyNear(Var(54)),Statetype = S
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = Helper(97530),FVar(31) = [50*Var(59)/5,(150+200*(EnemyNear(Var(54)),Statetype=A))*Var(59)/5]
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = 200 && Time > 6))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = Stateno = 200
;Trigger2 = Time > 6

;---------------------------------------------------------------------------
;Crouching Light Kick
;LbN
[State -1, Crouching Light Kick 蹲轻脚28.47.5]
type = ChangeState
value = 430
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 5
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,36]) && P2dist X >= 0) || (P2bodydist X < 42 && P2dist X >= 0))
Trigger1 = !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 45+(Stateno = [100,101])*5 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -5) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Helper(97530),FVar(31) = [600*Var(59)/5,800*Var(59)/5]) || ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 6 + EnemyNear(Var(54)),const(movement.yaccel) * 6 * (6 + 1) / 2 < 0) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || ((Stateno = 400 || Stateno = 430) && Time > 9))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Stand Light Kick
;LbN
[State -1, Stand Light Kick 站轻脚26.52.5]
type = ChangeState
value = 230
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Trigger1 = (((P2bodydist X-EnemyNear(Var(54)),Vel X*5 = [0,42]) && P2dist X >= 0) || (P2bodydist X < 48 && P2dist X >= 0)) && !(P2bodydist X+EnemyNear(Var(54)),Vel X*5 > 50 && EnemyNear(Var(54)),Statetype = A && facing = EnemyNear(Var(54)),facing)
Trigger1 = ((EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 5 + EnemyNear(Var(54)),const(movement.yaccel) * 5 * (5 + 1) / 2 > -20) && EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Vel Y >= 0) || EnemyNear(Var(54)),Statetype != A
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = Helper(97530),FVar(31) = [150*Var(59)/5,350*Var(59)/5]
Trigger1 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || ((Stateno = 200) && Time > 7 && P2bodydist X > 45) || ((Stateno = 230) && Time > 9))

;Trigger1 = Statetype = S
;Trigger1 = ctrl
;Trigger2 = (Stateno = 200) && Time > 7
;Trigger3 = (Stateno = 230) && Time > 9

;---------------------------------------------------------------------------
;Crouching Strong Kick
;LbN
[State -1, Crouching Strong Kick 蹲重脚72.60.10]
type = ChangeState
value = 440
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = !inguarddist
Triggerall = Statetype != A 
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2 + 2**4))
Triggerall = Helper(97530),FVar(37) >= 7
Triggerall = Stateno != [100,101]
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Trigger1 = ((P2bodydist X-EnemyNear(Var(54)),Vel X*10 = [48,55]) || (P2bodydist X = [45,55])) && Frontedgebodydist > 75
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger1 = EnemyNear(Var(54)),Numproj = 0
Trigger1 = (Helper(97530),FVar(31) >= 1000-20*Var(59)) && Var(59) < 5
Trigger1 = (ctrl || (Stateno = [19,21]))

;Trigger1 = Statetype = C
;Trigger1 = ctrl
;Trigger2 = (Stateno = 400) || (Stateno = 430)
;Trigger2 = (time > 9) || (Movecontact && Time > 5)

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
;Triggerall = !inguarddist
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Helper(97530),FVar(37) >= 2
Triggerall = (Pos Y + Vel Y * 4 + Const(movement.yaccel) * 4 * (4+1) / 2 < 0) && (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 >= 0)
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Triggerall = (P2bodydist X-Vel X*4-EnemyNear(Var(54)),Vel X*4 = [0,35]) || (P2bodydist X < 30 && P2dist X >= 0)
Triggerall = (Helper(97530),FVar(31) > 1000-Var(59)*300) || (Var(59) > 3)
Triggerall = ctrl || (Stateno = 600 && statetime >= 7)
Trigger1 = ((P2dist Y - Vel Y * 4 - const(movement.yaccel) * 4 * (4 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 = [-25,25]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger2 = ((Pos Y + Vel Y * 6 + Const(movement.yaccel) * 6 * (6+1) / 2 >= 0) && EnemyNear(Var(54)),Statetype = S)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Punch
[State -1, Jump Strong Punch 跳重拳72.45.7]
type = ChangeState
value = 610
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
;Triggerall = !inguarddist
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0) && Vel Y > 0
Triggerall = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Triggerall = ctrl && (Helper(97530),FVar(31) > 1000-Var(59)*120)
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [0,45]) || (P2bodydist X < 30 && P2dist X >= 0)
Trigger1 = ((P2dist Y - Vel Y * 7 - const(movement.yaccel) * 7 * (7 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 7 + EnemyNear(Var(54)),const(movement.yaccel) * 7 * (7 + 1) / 2 = [-15,35]) && EnemyNear(Var(54)),Statetype = A)

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
;Jump Strong Kick
;LbN
[State -1, Jump Strong Kick 跳重脚70.56.7]
type = ChangeState
value = 640
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
;Triggerall = !inguarddist
Triggerall = Statetype = A
Triggerall = EnemyNear(Var(54)),Stateno != [5120,5220)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2))
Triggerall = Helper(97530),FVar(37) >= 4
Triggerall = (Pos Y + Vel Y * 7 + Const(movement.yaccel) * 7 * (7+1) / 2 < 0) && Vel Y > 0
Triggerall = EnemyNear(Var(54)),Time > (Floor(Helper(97530),FVar(32))*2) % ((6-Var(59))**2) || Var(59) = 5
Triggerall = ctrl && (Helper(97530),FVar(31) > 1000-Var(59)*160)
Trigger1 = ((P2dist Y - Vel Y * 7 - const(movement.yaccel) * 7 * (7 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 7 + EnemyNear(Var(54)),const(movement.yaccel) * 7 * (7 + 1) / 2 = [-5,50]) && EnemyNear(Var(54)),Statetype = A)
Trigger1 = (P2bodydist X-Vel X*7-EnemyNear(Var(54)),Vel X*7 = [-5,55])
Trigger1 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger2 = ((P2dist Y - Vel Y * 9 - const(movement.yaccel) * 9 * (9 + 1) / 2 + EnemyNear(Var(54)),Vel Y * 9 + EnemyNear(Var(54)),const(movement.yaccel) * 9 * (9 + 1) / 2 = [-5,50]) && EnemyNear(Var(54)),Statetype = A)
Trigger2 = (P2bodydist X-Vel X*9-EnemyNear(Var(54)),Vel X*9 = [-5,52])
Trigger2 = EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Movetype = I
Trigger3 = ((Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0) && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C))
Trigger3 = (P2bodydist X-Vel X*9-EnemyNear(Var(54)),Vel X*9 = [-5,50]) || (P2bodydist X < 48 && P2dist X >= 0) || (Var(49) = [31,34])
Trigger4 = ((Pos Y + Vel Y * 9 + Const(movement.yaccel) * 9 * (9+1) / 2 >= 0) && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C))
Trigger4 = (Facing = 1 && Abs(helper(97532),RootDist X) < 25 && Abs(helper(97532),P2dist X < 90)) || (Facing = -1 && Abs(helper(97533),RootDist X) < 25 && Abs(helper(97533),P2dist X < 90))

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600 || Stateno = 630 ;jump_x or jump_a
;Trigger2 = Movecontact
;Trigger3 = Stateno = 1350 ;Air blocking


;===========================================================================

;[防御]
;｜
;[移动]
;｜
;[蓄气]

;---------------------------------------------------------------------------
[State -1, 蹲防躲避站立攻击]
type = ChangeState
value = 131
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
triggerall = Var(59) = 5
triggerall = Statetype != A
triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140))) 
triggerall = EnemyNear(Var(54)),Statetype = S && (EnemyNear(Var(54)),Stateno = [200,300)) && P2bodydist X < 45 && Helper(97530),FVar(32) > 750
triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**5)
Trigger1 = (Var(49) = [1,25]) && EnemyNear(Var(54)),Time <= Helper(97531),FVar(Var(49))

;---------------------------------------------------------------------------
[State -1,被飞道接近]
type = ChangeState
value = ifelse(EnemyNear(Var(54)),Statetype = C, 131, 130)
Triggerall = !Ishelper
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Triggerall = Helper(97530),FVar(33) != 2 && !(Helper(97530),FVar(33) = 5 && EnemyNear(Var(54)),Statetype = A)
Triggerall = (Helper(97530),FVar(32) < 1000 - (((6-Var(59))**2) - 1) * 25) || (EnemyNear(Var(54)),Time > ((6-Var(59))**2)) || Var(59) = 5
Trigger1 = EnemyNear(Var(54)),Numproj > 0 || (EnemyNear(Var(54)),Numhelper > Helper(97530),FVar(35) && (EnemyNear(Var(54)),Movetype = A || Random > 750))
Trigger1 = Inguarddist

;---------------------------------------------------------------------------
[State -1, 蹲防]
type = ChangeState
value = 131
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Triggerall = !(EnemyNear(Var(54)),hitdefattr = sca,at)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**0) 
Triggerall = (Helper(97530),FVar(32) < 1000 - (((6-Var(59))**2) - 1) * 25) || (EnemyNear(Var(54)),Time > ((6-Var(59))**2)) || Var(59) = 5
Triggerall = Helper(97530),FVar(33) != 2 && !(Helper(97530),FVar(33) = 5 && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Inguarddist || (!InGuardDist && EnemyNear(Var(54)),P2dist X < 5 && P2bodydist X < 60 && (EnemyNear(Var(54)),HitDefAttr = SCA,AA || (EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Statetype = A))) ;inguarddist或被打背
Trigger1 = EnemyNear(Var(54)),Statetype = C
Trigger2 = (Helper(97530),Var(15) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1]) || (Helper(97530),Var(16) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1])
Trigger2 = EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Stateno >= 200
Trigger3 = (Helper(97530),Var(17) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1]) || (Helper(97530),Var(18) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1])
Trigger3 = EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Stateno >= 200
Trigger4 = ((Floor(Helper(97530),Var(23)/1000) = Enemynear,Stateno) || (Floor(Helper(97530),Var(24)/1000) = Enemynear,Stateno))
Trigger4 = EnemyNear(Var(54)),Statetype = S && EnemyNear(Var(54)),Stateno >= 200

;---------------------------------------------------------------------------
[State -1, 立防]
type = ChangeState
value = 130
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
Triggerall = !(EnemyNear(Var(54)),hitdefattr = sca,at)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**0) 
Triggerall = (Helper(97530),FVar(32) < 1000 - (((6-Var(59))**2) - 1) * 25) || (EnemyNear(Var(54)),Time > ((6-Var(59))**2)) || Var(59) = 5
Triggerall = Helper(97530),FVar(33) != 2 && !(Helper(97530),FVar(33) = 5 && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Inguarddist || (!InGuardDist && EnemyNear(Var(54)),P2dist X < 5 && P2bodydist X < 60 && (EnemyNear(Var(54)),HitDefAttr = SCA,AA || (EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Statetype = A))) ;inguarddist或被打背
Trigger1 = EnemyNear(Var(54)),Statetype != C
Trigger2 = (Helper(97530),Var(15) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1]) || (Helper(97530),Var(16) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1])
Trigger2 = EnemyNear(Var(54)),Statetype = C && EnemyNear(Var(54)),Stateno >= 200
Trigger3 = (Helper(97530),Var(17) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1]) || (Helper(97530),Var(18) = [EnemyNear(Var(54)),Stateno*10,EnemyNear(Var(54)),Stateno*10+1])
Trigger3 = EnemyNear(Var(54)),Statetype = C && EnemyNear(Var(54)),Stateno >= 200
Trigger4 = ((Floor(Helper(97530),Var(23)/1000) = Enemynear,Stateno) || (Floor(Helper(97530),Var(24)/1000) = Enemynear,Stateno))
Trigger4 = EnemyNear(Var(54)),Statetype = C && EnemyNear(Var(54)),Stateno >= 200

;---------------------------------------------------------------------------
[State -1, 空防]
type = ChangeState
value = 132
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0 
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = ctrl
Triggerall = !(EnemyNear(Var(54)),hitdefattr = sca,at)
Triggerall = !(Ceil(Helper(97530),FVar(39)) & 2**0) 
Triggerall = (Helper(97530),FVar(32) < 1000 - (((6-Var(59))**2) - 1) * 25) || (EnemyNear(Var(54)),Time > ((6-Var(59))**2)) || Var(59) = 5
Triggerall = Helper(97530),FVar(33) != 2 && !(Helper(97530),FVar(33) = 5 && EnemyNear(Var(54)),Statetype = A)
Trigger1 = Inguarddist                                                             ;inguarddist或被打背
Trigger2 = !InGuardDist && EnemyNear(Var(54)),P2dist X < 5 && P2bodydist X < 60 && (EnemyNear(Var(54)),HitDefAttr = SCA,AA || (EnemyNear(Var(54)),Movetype = A && EnemyNear(Var(54)),Statetype = A))

;---------------------------------------------------------------------------
[State -1, 胜利后停止走动]
type = ChangeState
value = 0
Triggerall = !Ishelper
Triggerall = Var(59) > 0
Triggerall = Roundstate = [2,3]
Triggerall = Statetype != A
Triggerall = Alive && !EnemyNear(Var(54)),Alive
Trigger1 = Stateno = 10
Trigger2 = (Stateno = [19,21])
Trigger3 = Stateno = 40
ctrl = 1

;---------------------------------------------------------------------------
[State -1, 抓闪避硬直前跑/对方远飞行道具前跑准备大跳]
type = ChangeState
value = 100
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Frontedgebodydist > 50
Triggerall = !inguarddist
Triggerall = (Stateno != [100,101])
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**0 + 2**1 + 2**4))
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = (EnemyNear(Var(54)),Stateno != [5200,5220))
Trigger1 = Ceil(Helper(97530),FVar(39)) & 2**2 && facing != EnemyNear(Var(54)),facing && P2bodydist X > 50
Trigger2 = P2bodydist X > 160 && (Helper(97530),FVar(32) < 80*Var(59)) && EnemyNear(Var(54)),Time < 2
Trigger2 = (EnemyNear(Var(54)),Stateno = Helper(97531),Var(26)) || (EnemyNear(Var(54)),Stateno = Helper(97531),Var(27)) || (EnemyNear(Var(54)),Stateno = Helper(97531),Var(28)) || (EnemyNear(Var(54)),Stateno = Helper(97531),Var(29)) ; || (EnemyNear(Var(54)),Stateno = Helper(97531),Var(29))

;---------------------------------------------------------------------------
[State -1, 跳跃前]
type = ChangeState
value = 41
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Statetype != A 
Triggerall = Roundstate = 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Triggerall = Helper(97530),FVar(33) != 2
Trigger1 = EnemyNear(Var(54)),Movetype = I && EnemyNear(Var(54)),Numproj = 0 && !inguarddist
Trigger1 = (P2bodydist X = [90,125])
Trigger1 = (Random < 200-Var(59)*50) && Var(59) < 4
Trigger2 = (P2bodydist X = [90,150]) && (Stateno != [100,101])
Trigger2 = !inguarddist && EnemyNear(Var(54)),Statetype != A && Random < 300 && (EnemyNear(Var(54)),Power > Helper(97530),FVar(25) - 500)
Trigger2 = EnemyNear(Var(54)),Numproj > 0 || (EnemyNear(Var(54)),Numhelper > Helper(97530),FVar(35) && EnemyNear(Var(54)),Movetype = A)
Trigger3 = (P2bodydist X = [120,200]) && (Stateno = [100,101])
Trigger3 = !inguarddist && EnemyNear(Var(54)),Statetype != A && Random < 600 && (EnemyNear(Var(54)),Power > Helper(97530),FVar(25) - 500)
Trigger3 = EnemyNear(Var(54)),Numproj > 0 || (EnemyNear(Var(54)),Numhelper > Helper(97530),FVar(35) && EnemyNear(Var(54)),Movetype = A)

;---------------------------------------------------------------------------
[State -1, 跳跃前躲避飞行道具]
type = ChangeState
value = 41
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Statetype != A 
Triggerall = Roundstate = 2
Triggerall = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]) || (Stateno = [120,140)))
Triggerall = ((P2bodydist X = [75,(100+Random/25)]) && (Stateno != [100,101])) || ((P2bodydist X = [120,(175+Random/40)]) && (Stateno = [100,101]))
Triggerall = EnemyNear(Var(54)),Statetype != A && EnemyNear(Var(54)),Movetype = A && Random < 150*Var(59) && (EnemyNear(Var(54)),Power > Helper(97530),FVar(25) - 500)
Triggerall = (EnemyNear(Var(54)), PrevStateno <= 160) && (EnemyNear(Var(54)),Stateno >= 200)
Triggerall = (Helper(97530),FVar(32) < 150*Var(59))
Triggerall = Helper(97530),FVar(33) != 2
Trigger1 = !EnemyNear(Var(54)),hitdefattr = sca,sa,ha,sp,hp
Trigger1 = (Var(49) = [26,30]) && (Helper(97531),FVar(Var(49)) - EnemyNear(Var(54)),Time = [3,9])

;---------------------------------------------------------------------------
[State -1, 前跑]
type = ChangeState
value = 100
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Frontedgebodydist >= 20
;Triggerall = !inguarddist
Triggerall = (Stateno != [100,101])
Triggerall = !(Ceil(Helper(97530),FVar(39)) & (2**0 + 2**4))
Triggerall = (ctrl || (Stateno = [19,21]))
Triggerall = EnemyNear(Var(54)),Movetype != H && (EnemyNear(Var(54)),Stateno != [5200,5220))
Triggerall = Helper(97530),FVar(33) != 1
Trigger1 = (P2bodydist X > 200 && (Helper(97530),FVar(31) < (P2bodydist X*5 - 720) * (1+0.5*(EnemyNear(Var(54)),Vel X < 0)))) || (P2bodydist X > 135 && (Helper(97530),FVar(31) < (P2bodydist X*2 - 120) * (1+0.5*(EnemyNear(Var(54)),Vel X < 0))))
Trigger2 = (P2bodydist X > 90 && Helper(97530),FVar(31) < (P2bodydist X*1.75 - 90) * (1+0.5*(EnemyNear(Var(54)),Vel X < 0))) || ((P2bodydist X = [45,90]) && Helper(97530),FVar(31) < P2bodydist X *1.2 - 45)
Trigger3 = (P2bodydist X = [40,200]) && (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160)) && facing != EnemyNear(Var(54)),facing
Trigger3 = (!inguarddist && EnemyNear(Var(54)),Numproj = 0 && EnemyNear(Var(54)),Numhelper = Helper(97530),FVar(35)) && EnemyNear(Var(54)),Time >= (EnemyNear(Var(54)),Time - EnemyNear(Var(54)),AnimTime)*0.6 && EnemyNear(Var(54)),AnimTime < -10
Trigger4 = P2bodydist X + EnemyNear(Var(54)),Vel X*3 > 40 && facing = EnemyNear(Var(54)),facing && EnemyNear(Var(54)),AnimTime < -8
Trigger4 = (EnemyNear(Var(54)),Movetype = A || (EnemyNear(Var(54)),Movetype = I && !EnemyNear(Var(54)),ctrl && EnemyNear(Var(54)),Stateno >= 160))
Trigger5 = NumPartner > 0 && NumEnemy > 1 && EnemyNear(Var(54)),Movetype = H && P2bodydist X > 0
Trigger6 = P2bodydist X > (60 + Helper(97530),FVar(31)/25) && (PrevStateno = [120,160)) && EnemyNear(Var(54)),Movetype != A && Helper(97530),FVar(32) < P2bodydist X*3 + 20
Trigger7 = P2bodydist X > 75 && Power >= Powermax*0.9 && (EnemyNear(Var(54)),Statetype = L || (EnemyNear(Var(54)),Statetype = A && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Stateno >= 5050 && EnemyNear(Var(54)),Pos Y > -20))
Trigger8 = P2bodydist X > 90 && PrevStateno = 400

;Trigger7 = Backedgebodydist < 50
;Trigger7 = P2bodydist X > 100
;Trigger7 = !((P2bodydist X > 85 || EnemyNear(Var(54)),Pos Y < -150) && (EnemyNear(Var(54)),Movetype = H || EnemyNear(Var(54)),Statetype = L) && Frontedgebodydist > 60)
;Trigger7 = !(P2bodydist X > 75 && Helper(97530),FVar(37) < 4 && Frontedgebodydist > 60)

;---------------------------------------------------------------------------
[State -1, 向前走]
type = ChangeState
value = 21
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Frontedgebodydist >= 10
;Triggerall = !inguarddist
Triggerall = Stateno != 20 && (Stateno != [100,101])
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = !(Stateno = 19 && Time < 20 && P2bodydist X < 80)
Triggerall = P2dist X > 0
Triggerall = EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(33) != 1
Trigger1 = (P2bodydist X > 135 && (Random < (P2bodydist X * 5 - 400) * (1 + 0.5 * (EnemyNear(Var(54)),Vel X < 0)))) || (P2bodydist X > 100 && Random < (P2bodydist X*2) * (1 + 0.5 * (EnemyNear(Var(54)),Vel X < 0))) || (P2bodydist X > 50 && Random < 200)
Trigger2 = EnemyNear(Var(54)),Movetype != H && (EnemyNear(Var(54)),ctrl || (EnemyNear(Var(54)),Movetype = I && Random < 500))
Trigger2 = ((P2bodydist X = [25,80]) && Random < 300 && !(Stateno = 19 && Time < 15)) || (P2bodydist X > 75 && Random < 500 && Time > 10) || (P2bodydist X > 15 && facing = EnemyNear(Var(54)),facing)
Trigger3 = (PrevStateno = [120,160)) && EnemyNear(Var(54)),Movetype != A
Trigger3 = (P2bodydist X = [35,75])
Trigger4 = (Ceil(Helper(97530),FVar(39)) & (2**1 + 2**2)) && P2bodydist X > 30
Trigger5 = (EnemyNear(Var(54)),Pos Y + EnemyNear(Var(54)),Vel Y * 4 + EnemyNear(Var(54)),const(movement.yaccel) * 4 * (4 + 1) / 2 < 0) && EnemyNear(Var(54)),Statetype = A
Trigger5 = facing != EnemyNear(Var(54)),facing && P2bodydist X > 10 && EnemyNear(Var(54)),Vel X > 0
Trigger6 = P2bodydist X > 90 && ((EnemyNear(Var(54)),Stateno = [5200,5220)) || (EnemyNear(Var(54)),Stateno = 5210 && EnemyNear(Var(54)),Statetype = A))

;Trigger5 = P2bodydist X > 10 && (EnemyNear(Var(54)),Movetype != H && EnemyNear(Var(54)),Statetype != L)

;---------------------------------------------------------------------------
[State -1, 向后走变立防]
type = ChangeState
value = 130
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Stateno = 19
Trigger1 = Inguarddist

;---------------------------------------------------------------------------
[State -1, 向后走]
type = ChangeState
value = 19
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = Backedgebodydist >= 10
Triggerall = !inguarddist
Triggerall = !(Stateno = 19 || (Stateno = [100,101]) || (Stateno = [120,140)))
Triggerall = ctrl || (Stateno = [19,21])
Triggerall = !(Stateno = 21 && Time < 30)
Triggerall = (P2dist X > 0 || Frontedgebodydist < 10)
Triggerall = EnemyNear(Var(54)),Numproj = 0
Triggerall = Helper(97530),FVar(33) != 1
Trigger1 = P2bodydist X < 75 && Random > 960 + P2bodydist X/2 && EnemyNear(Var(54)),Movetype != H && (EnemyNear(Var(54)),Statetype = S || EnemyNear(Var(54)),Statetype = C)
Trigger2 = Facing = -1 && Abs(helper(97532),RootDist X) < 35 && Abs(helper(97532),RootDist X) <= Abs(helper(97532),P2dist X)
Trigger3 = Facing = 1 && Abs(helper(97533),RootDist X) < 35 && Abs(helper(97533),RootDist X) <= Abs(helper(97533),P2dist X)
Trigger4 = P2bodydist X < 30 && Var(59) > 3 && (EnemyNear(Var(54)),Stateno = [5200,5210))
Trigger5 = EnemyNear(Var(54)),Stateno = 5120 && P2bodydist X < 20
;Trigger6 = Helper(97530),FVar(34) < 5 && Var(56) <= Ceil(Helper(97530),FVar(11)/10

;Trigger4 = EnemyNear(Var(54)),Movetype != H && EnemyNear(Var(54)),Statetype != L && EnemyNear(Var(54)),Statetype != A 
;Trigger4 = (P2bodydist X = [30,60]) && Helper(97530),FVar(32) <= 200
;Trigger4 = EnemyNear(Var(54)),Stateno != [5200,5220)

;---------------------------------------------------------------------------
[State -1, 地面动作限制]
type = ChangeState
value = 0
Triggerall = !Ishelper
Triggerall = Var(59) > 0
Triggerall = Statetype != A
Triggerall = Roundstate = 2
Trigger1 = Stateno = 10
Trigger2 = Stateno = 20
Trigger3 = Stateno = 40
Trigger4 = (Stateno = [20,21])
Trigger4 = (P2dist X <= 0 && EnemyNear(Var(54)),Statetype = A) || (P2bodydist X <= 5 && EnemyNear(Var(54)),Statetype != A) 
Trigger5 = Stateno = 19 && EnemyNear(Var(54)),Movetype = H && EnemyNear(Var(54)),Statetype = A && Frontedgebodydist < 60
Trigger5 = (Facing = 1 && Abs(helper(97533),RootDist X) > 35 && Abs(helper(97533),RootDist X) > Abs(helper(97533),P2dist X)) || (Facing = -1 && Abs(helper(97532),RootDist X) > 35 && Abs(helper(97532),RootDist X) > Abs(helper(97532),P2dist X))
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Light Punch
;p`
[State -1, Crouching Light Punch 蹲轻拳23.38.4]
type = ChangeState
value = 400
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype != A
Triggerall = !inguarddist 
Triggerall = EnemyNear(Var(54)),Numproj = 0 
Triggerall = !(NumPartner > 0 && partner,alive)
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = [19,21])) && Power < Powermax ;|| (Stateno = [100,101])
Triggerall = !(EnemyNear(Var(54)),Stateno = 5120 && (EnemyNear(Var(54)),AnimTime > -12 || (P2bodydist X != [20,32])))
Trigger1 = EnemyNear(Var(54)),Statetype = L ;&& !(EnemyNear(Var(54)),Stateno < 5110 && Helper(97530),FVar(37) >= 5 && P2bodydist X < 50)
Trigger2 = EnemyNear(Var(54)),Statetype != L && Helper(97530),FVar(37) < 5 && !(EnemyNear(Var(54)),Pos Y < -45 && P2bodydist X > 75)
Trigger3 = P2bodydist X > 50 &&(EnemyNear(Var(54)),Stateno = [5200,5210)) && EnemyNear(Var(54)),Vel X < 0

;Trigger1 = (P2bodydist X > 85 && EnemyNear(Var(54)),Statetype = L) && Frontedgebodydist > 60
;Trigger2 = P2bodydist X > 75 && Helper(97530),FVar(37) < 4 && Frontedgebodydist > 60

;Trigger4 = (P2bodydist X = (0,50]) && (EnemyNear(Var(54)),Stateno = [5070,5120)) && (EnemyNear(Var(54)),Vel Y > 0) && (EnemyNear(Var(54)),Pos Y > -10)
;Trigger4 = Backedgebodydist > 120 && Power < 2500
;Trigger4 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
;Trigger5 = (P2bodydist X = (0,90]) && Helper(97530),FVar(37) < 4 && Power < 2500
;Trigger5 = (ctrl || (Stateno = [19,21]) || (Stateno = [100,101]))
;Trigger5 = Backedgebodydist > 120

;---------------------------------------------------------------------------
;Jump Light Punch
;p`
[State -1, Jump Light Punch 跳轻拳20.36.4]
type = ChangeState
value = 600
Triggerall = !Ishelper && EnemyNear(Var(54)),Alive
Triggerall = Var(59) > 0
Triggerall = Roundstate = 2
Triggerall = Statetype = A
Triggerall = !inguarddist
Triggerall = EnemyNear(Var(54)),Numproj = 0
Triggerall = !(NumPartner > 0 && partner,alive)
Triggerall = (Pos Y + Vel Y * 4 + Const(movement.yaccel) * 4 * (4+1) / 2 < 0)
Triggerall = Var(59) > 2
Triggerall = (ctrl || (Stateno = 600 && statetime >= 7)) && (Power < Powermax)
Triggerall = Helper(97530),FVar(33) != 5
Trigger1 = Vel X < 0 && (EnemyNear(Var(54)),Movetype = H || EnemyNear(Var(54)),Statetype = L || (EnemyNear(Var(54)),Stateno = [5000,5220)))
Trigger1 = EnemyNear(Var(54)),Movetype != A

;Trigger1 = Statetype = A
;Trigger1 = ctrl
;Trigger2 = Stateno = 600
;Trigger2 = statetime >= 7
;Trigger3 = Stateno = 1350 ;Air blocking

;---------------------------------------------------------------------------
[State -1, 胜利后后撤位置调整]
type = ChangeState
value = 105
Triggerall = !Ishelper
Triggerall = Var(59) > 0
Triggerall = Roundstate = 3
Triggerall = Statetype != A
triggerall = ctrl && Alive
trigger1 = Frontedgebodydist < 60


;===========================================================================

;[AI helper]

;---------------------------------------------------------------------------
[State -1, AI Helper 记录变量]
type=helper
trigger1 = !numHelper(97530)
;trigger1= alive && roundstate=2
helpertype=normal
name="AI helper0"
ID=97530             ;不要与已有的helper冲突
pos=Pos x,99999      ;扔屏幕右下角看不见的地方
stateno=97530        ;不要与已有的state冲突
keyctrl=0           
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -1, AI Helper 记录变量]
type=changestate
trigger1= isHelper(97530)
trigger1= stateno!=97530   
value=97530

;---------------------------------------------------------------------------
[State -1, AI Helper 记录变量]
type=helper
trigger1 = !numHelper(97531)
;trigger1= alive && roundstate=2
helpertype=normal
name="AI helper1"
ID=97531             ;不要与已有的helper冲突
pos=Pos x,99999      ;扔屏幕右下角看不见的地方
stateno=97531        ;不要与已有的state冲突
keyctrl=0           
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -1, AI Helper 记录变量]
type=changestate
trigger1= isHelper(97531)
trigger1= stateno!=97531   
value=97531

;---------------------------------------------------------------------------
[State -1, Helper 左版边距离检测]
type = helper
trigger1 = numhelper(97532) = 0
ID = 97532
stateno = 97532
helpertype = normal
name = ""
pos = 0,0
postype = P1
keyctrl = 0
ownpal = 1
pausemovetime = 9999999999
supermovetime = 9999999999
ignorehitpause = 1

[State -1, Helper 右版边距离检测]
type = helper
trigger1 = numhelper(97533) = 0
ID = 97533
stateno = 97532
helpertype = normal
name = ""
pos = 0,0
postype = P1
keyctrl = 0
ownpal = 1
pausemovetime = 9999999999
supermovetime = 9999999999
ignorehitpause = 1

[State -1, Helper 左版边距离检测]
type=changestate
trigger1= ishelper(97532)
trigger1= stateno!=97532   
value=97532

[State -1, Helper 右版边距离检测]
type=changestate
trigger1= ishelper(97533)
trigger1= stateno!=97532   
value=97532

;---------------------------------------------------------------------------
[State -1, AI Helper 记录变量]
type=helper
trigger1 = !numHelper(97534)
;trigger1= alive && roundstate=2
helpertype=normal
name="AI helper2"
ID=97534             ;不要与已有的helper冲突
pos=Pos x,99999      ;扔屏幕右下角看不见的地方
stateno=97534        ;不要与已有的state冲突
keyctrl=0           
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -1, AI Helper 记录变量]
type=changestate
trigger1= isHelper(97534)
trigger1= stateno!=97534   
value=97534


;===========================================================================

[State -1, Display] ;或者State -1, 数据
type = DisplaytoClipboard
Trigger1 = 1
text = "X : %d | Y : %d | var : %d | LX : %d | RX: %d "
params = ceil(P2bodydist X) , ceil(P2bodydist Y) , ceil(Prevstateno), ceil(helper(97532),RootDist X), ceil(helper(97533),RootDist X)

;Helper(97530),Var(40)

;text = "P2bodydist X : %d | P2bodydist Y : %d | Helper(97530),Var(23) : %d | helper(97532),RootDist X: %d | helper(97533),RootDist: %d "
;text = "Var(10) : %d | Var(11) : %d | Var(12) : %d | Var(38) : %d | Var(39) : %d "
;params = ceil(Helper(97530),Var(15)) , ceil(Helper(97530),Var(16)) , ceil(Helper(97530),Var(17)), ceil(Helper(97534),Var(4)), ceil(Helper(97534),Var(5))
;EnemyNear(Var(54)),Pos Y   Var()  EnemyNear(Var(54)),Pos Y   Frontedgebodydist   helper(97533),RootDist X



;===========================================================================

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;This controller plays a sound everytime KFM lands from a jump, or
;from his Back-dash.
[State -3, Landing Sound]
type = PlaySnd
Triggerall = Time = 1
Trigger1 = Stateno = 52 ;Jump land
Trigger2 = Stateno = 106 ;Run-Back land
value = 40, 0
